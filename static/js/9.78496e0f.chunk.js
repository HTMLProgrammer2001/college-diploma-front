(this.webpackJsonptrackteacher=this.webpackJsonptrackteacher||[]).push([[9],{264:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return i}));var n=a(321),r=(a(4),n.a.arrayInsert,n.a.arrayMove,n.a.arrayPop,n.a.arrayPush,n.a.arrayRemove,n.a.arrayRemoveAll,n.a.arrayShift,n.a.arraySplice,n.a.arraySwap,n.a.arrayUnshift,n.a.autofill,n.a.blur,n.a.change,n.a.clearAsyncError,n.a.clearFields,n.a.clearSubmit,n.a.clearSubmitErrors,n.a.destroy,n.a.focus,n.a.initialize,n.a.registerField,n.a.reset),c=(n.a.resetSection,n.a.setSubmitFailed,n.a.setSubmitSucceeded,n.a.startAsyncValidation,n.a.startSubmit),l=(n.a.stopAsyncValidation,n.a.stopSubmit),i=n.a.submit;n.a.touch,n.a.unregisterField,n.a.untouch,n.a.updateSyncWarnings,n.a.updateSyncErrors},278:function(e,t,a){"use strict";var n=a(294),r=a(0),c=a.n(r),l=a(506),i=a(507),o=a(517);t.a=function(e){var t=e.onlyInValid,a=void 0===t||t,r=Object(n.a)(e,["onlyInValid"]);return c.a.createElement(l.a,{controlId:r.name},r.label&&c.a.createElement(i.a,{column:!0},r.label),c.a.createElement(o.a,{type:r.type,name:r.name,value:r.input.value,className:r.className,onChange:r.input.onChange,onFocus:r.input.onFocus,onBlur:r.input.onBlur,isValid:!a&&r.meta.touched?r.meta.valid:void 0,isInvalid:r.meta.touched?!r.meta.valid:void 0}),r.meta.error&&c.a.createElement(o.a.Feedback,{type:"invalid",style:{display:"block"}},r.meta.touched&&r.meta.error))}},279:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(138),l=a(5);t.a=function(){var e=Object(l.g)();return r.a.createElement(c.a,{variant:"light",onClick:function(){return e.goBack()}},"\u041d\u0430\u0437\u0430\u0434")}},280:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){var t=e.error;return r.a.createElement("div",null,t||"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}},281:function(e,t,a){"use strict";var n=function(e){var t=e.getIn;return function(e,a){return function(n){var r=a||function(e){return t(e,"form")};return!!t(r(n),e+".submitting")}}},r=a(20);t.a=n(r.a)},284:function(e,t,a){"use strict";var n=a(21),r=a(0),c=a.n(r),l=a(7),i=a.n(l);t.a=function(e){var t,a=e.state,r=e.change,l=e.param;return c.a.createElement("i",{className:i()("fa cur pull-right",(t={},Object(n.a)(t,"fa-sort-amount-asc",1==a||void 0==a),Object(n.a)(t,"fa-sort-amount-desc",-1==a),Object(n.a)(t,"opacity-5",void 0==a),t)),onClick:function(){return r(l)}})}},285:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(353);t.a=function(e){var t=e.totalItems,a=e.curPage,n=e.setCur,l=e.pageSize,i=e.size,o=void 0===i?5:i,u=a>o,s=Math.ceil(t/l),m=s>(Math.floor((a-1)/o)+1)*o,d=Math.floor((a-1)/o);return s<=1?null:r.a.createElement(c.a,null,u&&r.a.createElement(c.a.Item,{onClick:function(){return n((d-1)*o+1)}},"<"),new Array(o).fill("").map((function(e,t){var l=d*o+t+1;return l>s?null:r.a.createElement(c.a.Item,{key:t,active:a==l,onClick:function(){return n(l)}},l)})),m&&r.a.createElement(c.a.Item,{onClick:function(){return n((d+1)*o+1)}},">"))}},291:function(e,t,a){"use strict";t.a=function(e){return e?null:"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}},318:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(343),l=a.n(c),i=a(506),o=a(507),u=a(517);t.a=function(e){var t=e.meta,a=e.input,n=e.name,c=e.label,s=e.className;return r.a.createElement(i.a,null,c&&r.a.createElement(o.a,{column:!0},c),r.a.createElement(l.a,{selected:a.value,className:s,dateFormat:"dd.MM.yyyy",showMonthDropdown:!0,showYearDropdown:!0,onChange:function(e){return a.onChange(e,n)}}),t.touched&&t.error&&r.a.createElement(u.a.Feedback,{style:{display:"block"}},t.error))}},319:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(23),l=a(28),i=Object(c.b)((function(e){return{user:Object(l.a)(e)}}));t.a=i((function(e){var t=e.role,a=e.children;return e.user.role<=t?r.a.createElement(r.a.Fragment,null,a):null}))},320:function(e,t,a){"use strict";t.a=function(e,t){var a={};if(Array.isArray(e))return e.forEach((function(e,n){var r="".concat(t,"[").concat(n,"]");a[r]=e})),a;if(e instanceof Object){for(var n in e){var r="".concat(t,"[").concat(n,"]");a[r]=e[n]}return a}}},323:function(e,t,a){"use strict";var n=a(2),r=a(3),c=a(7),l=a.n(c),i=a(0),o=a.n(i),u=a(12),s=o.a.forwardRef((function(e,t){var a=e.bsPrefix,c=e.variant,i=e.animation,s=e.size,m=e.children,d=e.as,p=void 0===d?"div":d,b=e.className,f=Object(r.a)(e,["bsPrefix","variant","animation","size","children","as","className"]),v=(a=Object(u.a)(a,"spinner"))+"-"+i;return o.a.createElement(p,Object(n.a)({ref:t},f,{className:l()(b,v,s&&v+"-"+s,c&&"text-"+c)}),m)}));s.displayName="Spinner",t.a=s},327:function(e,t,a){"use strict";var n=a(17),r=a(8),c=a.n(r),l=a(19),i=a(101),o=a(0),u=a.n(o),s=a(385),m=a(506),d=a(507),p=a(517),b=a(1),f=a(99),v=a.n(f),E=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)(null),u=Object(i.a)(r,2),s=u[0],m=u[1],d=Object(o.useState)(null),p=Object(i.a)(d,2),f=p[0],E=p[1],h=Object(o.useCallback)(function(){var e=Object(l.a)(c.a.mark((function e(t){var a,r,l,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.headers,l=t.method,i=t.data,n(!0),e.prev=2,e.next=5,new Promise((function(e){setTimeout(e,3e3)}));case 5:return e.next=7,v.a.request({method:l,url:a,params:i,headers:Object(b.a)(Object(b.a)({},r),{},{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Access-Control-Allow-Origin":"*"})});case 7:o=e.sent,E(o.data),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),m((null===(u=e.t0.response)||void 0===u?void 0:u.data.message)||e.t0.message);case 14:return e.prev=14,n(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),[a,s,f]);return{isLoading:a,error:s,data:f,request:h}},h=function(e,t){var a=null;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];a&&clearTimeout(a),a=setTimeout((function(){e.apply(void 0,r)}),t)}};t.a=function(e){var t=e.id,a=e.placeholder,r=e.url,b=e.size,f=void 0===b?5:b,v=e.input,g=v.onChange,y=v.name,O=Object(o.useState)(null),j=Object(i.a)(O,2),x=j[0],w=j[1],N=E(),S=N.request,k=N.error,F=N.isLoading,A=N.data;Object(o.useEffect)((function(){null!=x&&x.length>=1&&P()}),[x]);var P=function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,n=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,a={q:x,page:t,pageSize:f},e.next=4,S({url:r,data:a});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=h(function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(null,y),w(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500),C=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(A.meta.current_page+1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return u.a.createElement(m.a,{controlId:t},a&&u.a.createElement(d.a,{column:!0},a),u.a.createElement(s.a,{onInputChange:I,onPaginate:C,onSearch:function(){console.log("Search")},filterBy:["title"],labelKey:"title",delay:500,id:t,maxResults:f,minLength:1,options:[{id:-1,title:"All"}].concat(Object(n.a)((null===A||void 0===A?void 0:A.data)?A.data:[])),isLoading:F,placeholder:a,paginate:!0,emptyLabel:"No items",searchText:"Search...",isInvalid:!!k,renderMenuItemChildren:function(e){return u.a.createElement("div",{key:e.id,onClick:function(){return function(e){g(e,y)}(e.id)}},e.title)}}),k&&u.a.createElement(p.a.Feedback,{type:"invalid",style:{display:"block"}},e.meta.touched&&k))}},513:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),l=a(63),i=a(505),o=a(138),u=a(508),s=a(15),m=a(23),d=a(266),p=a(279),b=a(292),f=a(293),v=a(342),E=a(278),h=a(327),g=a(318),y=Object(f.a)({form:"publicationsFilterForm"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t,className:"w-100 center flex-column my-3"},r.a.createElement(v.a,null,(function(e){return r.a.createElement(u.a,null,r.a.createElement(b.a,{component:h.a,name:"filterUser",id:"filterUser",className:"w-100",placeholder:e("publications.all.filterUser"),url:"".concat("http://localhost:8000/api","/search/users")}),r.a.createElement(b.a,{component:E.a,type:"text",name:"filterTitle",className:"w-100 ml-1",label:e("publications.all.filterName")}))})),r.a.createElement(v.a,null,(function(e){return r.a.createElement(u.a,null,r.a.createElement(b.a,{component:g.a,name:"filterFrom",className:"w-100",label:e("publications.all.filterFrom")}),r.a.createElement(b.a,{component:g.a,name:"filterTo",className:"w-100",label:e("publications.all.filterTo")}))})),r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",null,r.a.createElement(o.a,{variant:"info",type:"submit"},e("common.search")))})))})),O=a(1),j=a(351),x=a(284),w=a(34),N=a(280),S=a(97),k=a(323),F=a(27),A=a(319),P=function(e){var t=e.publication,a=e.isDeleting,n=e.del;return r.a.createElement("tr",null,r.a.createElement("th",null,t.id),r.a.createElement("th",null,t.title),r.a.createElement("th",null,t.authors),r.a.createElement("th",null,t.date_of_publication),r.a.createElement("th",null,r.a.createElement(A.a,{role:F.a.MODERATOR},r.a.createElement(s.b,{to:"/publications/".concat(t.id,"/edit")},r.a.createElement("i",{className:"fa fa-pencil"})),a?r.a.createElement(s.b,{to:"#"},r.a.createElement("i",{className:"fa fa-close",onClick:function(){return n(t.id)}})):r.a.createElement(k.a,{animation:"border",size:"sm"}))))},I=function(e){return e.publications.all},C=function(e){return I(e).sort},z=function(e){return{pageSize:I(e).pageSize,curPage:I(e).currentPage,totalItems:I(e).total}},T=function(e){return e.publications.del},R=a(44),L=function(){return{type:R.d}},M=function(e){return{type:R.c,error:e}},D=function(e){return{type:R.e,payload:e}},B=function(e){return{type:R.b,payload:e}},_=a(8),V=a.n(_),U=a(19),q=a(282),W=a(99),J=a.n(W),K=a(320),Y=J.a.create({baseURL:"".concat("http://localhost:8000/api","/publications"),headers:{"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),G={getPublications:function(){var e=arguments;return Object(U.a)(V.a.mark((function t(){var a,n,r,c,l;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},n=e.length>1&&void 0!==e[1]?e[1]:[],r=e.length>2&&void 0!==e[2]?e[2]:1,c=e.length>3&&void 0!==e[3]?e[3]:5,l=Object(K.a)(n,"sort"),t.next=7,Y.get("/",{params:Object(O.a)(Object(O.a)(Object(O.a)({},a),l),{},{page:r,pageSize:c})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},getPublication:function(e){return Object(U.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.get("/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},editPublication:function(e,t){return Object(U.a)(V.a.mark((function a(){return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Y.put("/".concat(e),t);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()},deletePublication:function(e){return Object(U.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.delete("/".concat(e));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},addPublication:function(e){return Object(U.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.post("/add",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(U.a)(V.a.mark((function t(a,n){var r,c,l,i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(L()),t.prev=1,r=Object(q.a)("publicationsFilterForm"),c=C(n()),l=z(n()),t.next=5,G.getPublications(r(n()),c,e,l.pageSize);case 5:i=t.sent,a(D(i.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a(M(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}()},Q=a(96),X=a(82),Z=function(e){return{type:X.b,payload:e}},$=function(e,t){return{type:X.a,error:t,payload:e}},ee=function(e){return{type:X.c,payload:e}},te=function(e){return function(){var t=Object(U.a)(V.a.mark((function t(a){var n,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Z(e)),t.prev=1,t.next=4,G.deletePublication(e);case 4:a(ee(e)),a(B(e)),Q.b.success("\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u0441 id ".concat(e," \u0443\u0434\u0430\u043b\u0435\u043d\u043e")),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a($(e,(null===(n=t.t0.response)||void 0===n?void 0:n.data.message)||t.t0.message)),Q.b.error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat((null===(r=t.t0.response)||void 0===r?void 0:r.data.message)||t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},ae=Object(m.b)((function(e){return Object(O.a)(Object(O.a)({},I(e)),{},{deleting:T(e)})}),(function(e){return{changeSort:function(t){e(function(e){return{type:R.a,payload:e}}(t)),e(H(1))},load:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;e(H(t))},deleteItem:function(t){e(te(t))}}}))((function(e){var t,a,c,l;Object(n.useEffect)((function(){e.isLoading||e.publications.length||e.load()}),[]);var i=Object(d.a)().t;return r.a.createElement("div",{className:"table-wrapper"},r.a.createElement(j.a,{striped:!0,bordered:!0,hover:!0,style:{minWidth:"600px"}},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{className:"pull-left"},"ID"),r.a.createElement(x.a,{state:null===(t=Object(S.a)(e.sort,"ID"))||void 0===t?void 0:t.direction,change:e.changeSort,param:"ID"})),r.a.createElement("th",null,r.a.createElement("span",{className:"pull-left"},i("publications.all.name")),r.a.createElement(x.a,{state:null===(a=Object(S.a)(e.sort,"name"))||void 0===a?void 0:a.direction,change:e.changeSort,param:"name"})),r.a.createElement("th",null,r.a.createElement("span",{className:"pull-left"},i("publications.all.authors")),r.a.createElement(x.a,{state:null===(c=Object(S.a)(e.sort,"authors"))||void 0===c?void 0:c.direction,change:e.changeSort,param:"authors"})),r.a.createElement("th",null,r.a.createElement("span",{className:"pull-left"},i("publications.all.date")),r.a.createElement(x.a,{state:null===(l=Object(S.a)(e.sort,"date"))||void 0===l?void 0:l.direction,change:e.changeSort,param:"date"})),r.a.createElement("th",null,i("common.actions")))),r.a.createElement("tbody",null,e.isLoading&&r.a.createElement("tr",null,r.a.createElement("th",{colSpan:5,className:"text-center"},r.a.createElement(w.a,null))),e.error&&r.a.createElement("tr",{className:"text-center text-danger"},r.a.createElement("th",{colSpan:5,className:"text-center"},r.a.createElement(N.a,{error:e.error}))),!e.isLoading&&!e.error&&!e.publications.length&&r.a.createElement("tr",{className:"font-weight-bold text-center"},r.a.createElement("th",{colSpan:5,className:"text-center"},i("common.noItems",{what:i("publications.all.noForm")}))),!e.isLoading&&!e.error&&e.publications.map((function(t){return r.a.createElement(P,{key:t.id,publication:t,isDeleting:-1==e.deleting.findIndex((function(e){return e==t.id})),del:e.deleteItem})})))))})),ne=a(285),re=Object(m.b)((function(e){return{paginator:z(e)}}),{changePage:H})((function(e){var t=e.changePage,a=e.paginator,c=Object(d.a)().t;return Object(n.useEffect)((function(){document.title=c("publications.all.pageTitle")}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},c("publications.name")),r.a.createElement(i.a,{className:"mr-5"},r.a.createElement(i.a.Body,null,r.a.createElement("div",{className:"model__filter-form"},r.a.createElement("div",null,r.a.createElement(A.a,{role:F.a.MODERATOR},r.a.createElement(s.b,{to:"/publications/add"},r.a.createElement(o.a,{variant:"success"},c("common.add"))))),r.a.createElement("div",null,r.a.createElement(A.a,{role:F.a.MODERATOR},r.a.createElement(s.b,{to:"/publications/import"},r.a.createElement(o.a,{variant:"primary"},c("common.import")))))),r.a.createElement(y,{onSubmit:function(){return t(1)}}),r.a.createElement("div",{className:"d-flex justify-content-center w-100"},r.a.createElement(ae,null)),r.a.createElement("div",{className:"d-flex my-3 justify-content-end w-100"},r.a.createElement(ne.a,Object.assign({},a,{setCur:t})))),r.a.createElement(i.a.Footer,null,r.a.createElement(u.a,{className:"justify-content-between p-2"},r.a.createElement(p.a,null)))))})),ce=a(294),le=a(281),ie=a(264),oe=a(35),ue=function(e){return e.publications.edit},se=function(e){return ue(e).publication},me=a(81),de=function(e){return function(){var t=Object(U.a)(V.a.mark((function t(a){var n,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:me.b}),t.prev=1,t.next=4,G.getPublication(e);case 4:n=t.sent,a((l=n.data.data,{type:me.c,payload:l})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a((c=(null===(r=t.t0.response)||void 0===r?void 0:r.data.message)||t.t0.message,{type:me.a,error:c}));case 11:case"end":return t.stop()}var c,l}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},pe=function(e,t){return function(){var a=Object(U.a)(V.a.mark((function a(n){var r,c,l;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Object(ie.b)("publicationsEditForm")),a.prev=1,a.next=4,G.editPublication(e,t);case 4:n(Object(ie.c)("publicationsEditForm")),Q.b.success("\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(Object(ie.c)("publicationsEditForm",Object(O.a)({_error:(null===(r=a.t0.response)||void 0===r?void 0:r.data.message)||a.t0.message},null===(c=a.t0.response)||void 0===c?void 0:c.data.errors))),Q.b.error((null===(l=a.t0.response)||void 0===l?void 0:l.data.message)||a.t0.message);case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()},be=a(291),fe=Object(m.b)((function(e){return{publication:se(e)}}))(Object(f.a)({form:"publicationsEditForm"})((function(e){var t=e.handleSubmit,a=e.error,c=e.initialize,l=e.publication;return Object(n.useEffect)((function(){c(Object(O.a)({},l))}),[]),r.a.createElement("form",{onSubmit:t},a&&r.a.createElement("div",null,a),r.a.createElement("div",{className:"d-md-flex w-100"},r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",{className:"w-100 pr-3"},r.a.createElement(b.a,{component:E.a,type:"text",name:"title",label:e("publications.edit.name"),validate:[be.a]}),r.a.createElement(b.a,{component:E.a,type:"text",name:"publisher",label:e("publications.edit.publisher"),validate:[be.a]}),r.a.createElement(b.a,{component:E.a,type:"text",name:"url",label:e("publications.edit.url")}))})),r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",{className:"w-100 pl-3"},r.a.createElement(b.a,{component:g.a,name:"date",className:"mb-2",label:e("publications.edit.date")}),r.a.createElement(b.a,{component:h.a,name:"authors",placeholder:e("publications.edit.authors"),url:"".concat("http://localhost:8000/api","/search/users"),multiple:!0}),r.a.createElement(b.a,{component:E.a,type:"text",name:"another_authors",label:e("publications.edit.anotherAuthors")}))}))),r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",{className:"w-100 mt-2"},r.a.createElement(b.a,{component:"textarea",className:"form-control",name:"description",rows:5,label:e("publications.edit.description")}))})))}))),ve=Object(m.b)((function(e){return{editState:ue(e),submitting:Object(le.a)("publicationsEditForm")(e)}}),{loadPublication:de,send:ie.d,editPublication:pe}),Ee=Object(oe.a)(F.a.MODERATOR,!0)(ve((function(e){var t=e.editState,a=e.loadPublication,c=Object(ce.a)(e,["editState","loadPublication"]),l=Object(d.a)().t;Object(n.useEffect)((function(){a(+c.match.params.id),document.title=l("publications.edit.pageTitle")}),[]);return t.publication||t.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},l("publications.edit.pageTitle")),r.a.createElement(i.a,{className:"mr-5"},r.a.createElement(i.a.Body,null,t.isLoading&&r.a.createElement(w.a,null),!t.isLoading&&t.error&&r.a.createElement(N.a,{error:t.error}),!t.isLoading&&!t.error&&r.a.createElement(fe,{onSubmit:function(e){c.editPublication(+c.match.params.id,e)}})),r.a.createElement(i.a.Footer,null,r.a.createElement(u.a,{className:"justify-content-between p-2"},r.a.createElement(p.a,null),!t.isLoading&&!t.error&&r.a.createElement(o.a,{variant:"warning",onClick:function(){c.send("publicationsEditForm")},disabled:c.submitting},c.submitting&&r.a.createElement(k.a,{animation:"border",size:"sm"}),l("common.edit")))))):null}))),he=Object(f.a)({form:"publicationsAddForm"})((function(e){var t=e.handleSubmit,a=e.error;return r.a.createElement("form",{onSubmit:t},a&&r.a.createElement("div",null,a),r.a.createElement("div",{className:"d-md-flex w-100"},r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",{className:"w-100 pr-3"},r.a.createElement(b.a,{component:E.a,type:"text",name:"title",label:e("publications.add.name"),validate:[be.a]}),r.a.createElement(b.a,{component:E.a,type:"text",name:"publisher",label:e("publications.add.publisher"),validate:[be.a]}),r.a.createElement(b.a,{component:E.a,type:"text",name:"url",label:e("publications.add.url")}))})),r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",{className:"w-100 pl-3"},r.a.createElement(b.a,{component:g.a,name:"date",className:"mb-2",label:e("publications.add.date")}),r.a.createElement(b.a,{component:h.a,name:"authors",placeholder:e("publications.add.authors"),url:"".concat("http://localhost:8000/api","/search/users"),multiple:!0}),r.a.createElement(b.a,{component:E.a,type:"text",name:"another_authors",label:e("publications.add.anotherAuthors")}))}))),r.a.createElement(v.a,null,(function(e){return r.a.createElement("div",{className:"w-100 mt-2"},r.a.createElement(b.a,{component:"textarea",className:"form-control",name:"description",rows:5,label:e("publications.add.description")}))})))})),ge=function(e){return function(){var t=Object(U.a)(V.a.mark((function t(a){var n,r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(Object(ie.b)("publicationsAddForm")),t.prev=1,t.next=4,G.addPublication(e);case 4:a(Object(ie.c)("publicationsAddForm")),a(Object(ie.a)("publicationsAddForm")),Q.b.success("\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a(Object(ie.c)("publicationsAddForm",Object(O.a)({_error:(null===(n=t.t0.response)||void 0===n?void 0:n.data.message)||t.t0.message},null===(r=t.t0.response)||void 0===r?void 0:r.data.errors))),Q.b.error((null===(c=t.t0.response)||void 0===c?void 0:c.data.message)||t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},ye=Object(m.b)((function(e){return{submitting:Object(le.a)("publicationsAddForm")(e)}}),{add:ge,send:ie.d}),Oe=Object(oe.a)(F.a.MODERATOR,!0)(ye((function(e){var t=e.add,a=e.send,c=e.submitting,l=Object(d.a)().t;return Object(n.useEffect)((function(){document.title=l("publications.add.pageTitle")}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"title"},l("publications.add.pageTitle")),r.a.createElement(i.a,{className:"mr-5"},r.a.createElement(i.a.Body,null,r.a.createElement(he,{onSubmit:t})),r.a.createElement(i.a.Footer,null,r.a.createElement(u.a,{className:"justify-content-between p-2"},r.a.createElement(p.a,null),r.a.createElement(o.a,{variant:"success",onClick:function(){return a("publicationsAddForm")},disabled:c},c&&r.a.createElement(k.a,{size:"sm",animation:"border"}),l("common.add"))))))})));t.default=Object(oe.a)(F.a.VIEWER,!0)((function(){return r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/publications",exact:!0,component:re}),r.a.createElement(c.b,{path:"/publications/add",exact:!0,component:Oe}),r.a.createElement(c.b,{path:"/publications/:id/edit",exact:!0,component:Ee}),r.a.createElement(c.b,{path:"/",component:l.a}))}))}}]);
//# sourceMappingURL=9.78496e0f.chunk.js.map