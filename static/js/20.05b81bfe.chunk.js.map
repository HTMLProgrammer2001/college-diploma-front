{"version":3,"sources":["common/BackButton.tsx","common/formElements/InputElement.tsx","utils/validators/required.ts","common/formElements/DateElement.tsx","utils/validators/date.ts","common/formElements/FileElement.tsx","common/formElements/styles.module.scss","utils/validators/email.ts","utils/validators/lengthIn.ts","utils/validators/sameAs.ts","utils/validators/phone.ts","pages/ProfileEditPage/EditProfileForm.tsx","utils/helpers/prepareData.ts","redux/profile/edit/thunks.ts","pages/ProfileEditPage/index.tsx"],"names":["BackButton","history","useHistory","variant","onClick","goBack","InputElement","onlyInValid","props","controlId","name","label","column","type","value","input","className","onChange","onFocus","onBlur","isValid","meta","touched","valid","undefined","isInvalid","error","Feedback","style","display","required","str","i18next","t","CustomInput","placeholder","id","DateElement","customInput","selected","moment","toDate","wrapperClassName","dateFormat","showMonthDropdown","showYearDropdown","d","date","e","FileElement","onDrop","acceptedFiles","getRootProps","getInputProps","position","styles","fileDrop","fileDrop__svg","xmlns","x","y","width","height","fileDrop__rect","fileDrop__rect_2","fileDrop__label","module","exports","email","RegExp","test","lengthIn","min","max","Infinity","context","length","sameAs","field","allValues","phone","connected","connect","state","user","selectMeInfo","minMaxPassword","sameConfirm","reduxForm","form","handleSubmit","initialize","useEffect","birthday","address","onSubmit","Translation","Field","defaultValue","component","validate","autocomplete","vals","formData","FormData","key","append","thunkProfileEdit","dispatch","a","startSubmit","userActionsApi","editProfile","prepareProfileEditData","resp","meLoadSuccess","data","newUser","stopSubmit","toast","success","_error","response","message","errors","submitting","isSubmitting","sendForm","submit","edit","useTranslation","document","head","title","Card","Body","Footer","Row","Button","disabled","Spinner","size","animation"],"mappings":"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","file":"static/js/20.05b81bfe.chunk.js","sourcesContent":["import React from 'react';\nimport {Button} from 'react-bootstrap';\nimport {useHistory} from 'react-router-dom';\n\n\nconst BackButton: React.FC<{}> = () => {\n\tconst history = useHistory();\n\n\treturn (\n\t\t<Button variant=\"light\" onClick={() => history.goBack()}>Назад</Button>\n\t);\n};\n\nexport default BackButton;\n","import React, {useEffect} from 'react';\nimport {WrappedFieldProps} from 'redux-form';\nimport {FormControl, FormGroup, FormLabel} from 'react-bootstrap';\n\n\ntype IInputElementProps = WrappedFieldProps & HTMLInputElement & {label: string, onlyInValid: boolean};\nconst InputElement: React.FC<IInputElementProps> = ({onlyInValid = true, ...props}) => {\n\t// useEffect(() => {\n\t// \tif(!props.meta.touched && props.defaultValue)\n\t// \t\tprops.input.onChange(props.defaultValue as any, props.name);\n\t// }, []);\n\n\treturn (\n\t\t<FormGroup controlId={props.name}>\n\t\t\t{\n\t\t\t\tprops.label &&\n\t\t\t\t<FormLabel column={true}>{props.label}</FormLabel>\n\t\t\t}\n\n\t\t<FormControl\n\t\t\ttype={props.type}\n\t\t\tname={props.name}\n\t\t\tvalue={props.input.value}\n\t\t\tclassName={props.className}\n\t\t\tonChange={props.input.onChange}\n\t\t\tonFocus={props.input.onFocus}\n\t\t\tonBlur={props.input.onBlur}\n\t\t\tisValid={!onlyInValid && props.meta.touched ? props.meta.valid : undefined}\n\t\t\tisInvalid={props.meta.touched ? !props.meta.valid : undefined}\n\t\t/>\n\n\t\t\t{\n\t\t\t\tprops.meta.error &&\n\t\t\t\t<FormControl.Feedback type=\"invalid\" style={{display: 'block'}}>\n\t\t\t\t\t{props.meta.touched && props.meta.error}\n\t\t\t\t</FormControl.Feedback>\n\t\t\t}\n\t\t</FormGroup>\n\t);\n};\n\nexport default InputElement;\n","import i18next from 'i18next';\n\nconst required = (str: string) => {\n\treturn str ? null : i18next.t('validators.required');\n};\n\nexport default required;\n","import React from 'react';\nimport {WrappedFieldProps} from 'redux-form';\nimport DatePicker, {ReactDatePickerProps} from 'react-datepicker';\nimport {FormGroup, FormLabel, FormControl} from 'react-bootstrap';\nimport moment from 'moment';\n\n\nconst CustomInput: React.FC<any> = ({onChange, placeholder, value, id, onClick}) => (\n\t<input\n\t\tclassName=\"form-control w-100\"\n\t\tvalue={value}\n\t\tonClick={onClick}\n\t\tonChange={onChange}\n\t\tplaceholder={placeholder}\n\t\tid={id}\n\t/>\n);\n\n\ntype IDateElementProps = WrappedFieldProps &\n\tHTMLInputElement & {label: string} & ReactDatePickerProps;\n\nconst DateElement: React.FC<IDateElementProps> = ({meta, input, name, label}) => (\n\t<FormGroup>\n\t\t{\n\t\t\tlabel &&\n\t\t\t\t<FormLabel column={true}>{label}</FormLabel>\n\t\t}\n\n\t\t<DatePicker\n\t\t\tcustomInput={<CustomInput/>}\n\t\t\tselected={input.value ? moment(input.value).toDate() : null}\n\t\t\twrapperClassName=\"w-100\"\n\t\t\tdateFormat=\"dd.MM.yyyy\"\n\t\t\tshowMonthDropdown={true}\n\t\t\tshowYearDropdown={true}\n\t\t\tonChange={(d: any) => input.onChange(d, name)}\n\t\t/>\n\n\t\t{\n\t\t\tmeta.touched && meta.error &&\n\t\t\t\t<FormControl.Feedback style={{display: 'block'}} type=\"invalid\">\n\t\t\t\t\t{meta.error}\n\t\t\t\t</FormControl.Feedback>\n\t\t}\n\t</FormGroup>\n);\n\nexport default DateElement;\n","import moment from 'moment';\nimport i18next from 'i18next';\n\n\nconst date = (value: string) => {\n\tif(value == null)\n\t\treturn null;\n\n\ttry{\n\t\tconst date = moment(value);\n\t\treturn null;\n\t}\n\tcatch (e) {\n\t\treturn i18next.t('validators.date');\n\t}\n};\n\nexport default date;\n","import React, {useState} from 'react';\nimport Dropzone from 'react-dropzone';\nimport {WrappedFieldProps} from 'redux-form';\n\nimport styles from './styles.module.scss';\nimport {FormControl} from 'react-bootstrap';\n\n\ntype IFileElementProps = WrappedFieldProps & {label: string, name: string};\nconst FileElement: React.FC<IFileElementProps> = ({name, label, input, meta}) => {\n\t\tconst handler = (acceptedFiles: File[]) => {\n\t\t\tinput.onChange(acceptedFiles[0] as any, name);\n\t\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Dropzone onDrop={handler}>\n\t\t\t\t{\n\t\t\t\t\t({getRootProps, getInputProps}) => (\n\t\t\t\t\t\t<section style={{position: 'relative'}}>\n\t\t\t\t\t\t\t<div {...getRootProps()} className={styles.fileDrop}>\n\t\t\t\t\t\t\t\t<input {...getInputProps()}/>\n\n\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\tclassName={styles.fileDrop__svg}\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\tx=\"0\"\n\t\t\t\t\t\t\t\t\t\ty=\"0\"\n\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\t\t\t\theight=\"100%\"\n\t\t\t\t\t\t\t\t\t\tclassName={styles.fileDrop__rect}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\t\t\tx=\"0\"\n\t\t\t\t\t\t\t\t\t\ty=\"0\"\n\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\t\t\t\t\t\theight=\"100%\"\n\t\t\t\t\t\t\t\t\t\tclassName={`${styles.fileDrop__rect} ${styles.fileDrop__rect_2}`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\n\t\t\t\t\t\t\t\t<p className={styles.fileDrop__label}>\n\t\t\t\t\t\t\t\t\t<div>{label}</div>\n\t\t\t\t\t\t\t\t\t<div>{input.value?.name}</div>\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t</Dropzone>\n\n\t\t\t{\n\t\t\t\tmeta.touched && meta.error &&\n\t\t\t\t<FormControl.Feedback style={{display: 'block'}}>\n\t\t\t\t\t{meta.error}\n\t\t\t\t</FormControl.Feedback>\n\t\t\t}\n\t\t</div>\n\t);\n};\n\nexport default FileElement;\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fileDrop\":\"styles_fileDrop__cljnO\",\"fileDrop__label\":\"styles_fileDrop__label__9H1fT\",\"fileDrop__svg\":\"styles_fileDrop__svg__2L6Jt\",\"fileDrop__rect\":\"styles_fileDrop__rect__30pcF\",\"fileDrop__rect_2\":\"styles_fileDrop__rect_2__1rH_2\"};","import i18next from 'i18next';\n\nconst email = (str: string) => {\n\tif(str == null)\n\t\treturn null;\n\n\treturn new RegExp('.+@.+\\\\.\\\\w{2,}', 'i').test(str) ? null : i18next.t('validators.email');\n};\n\nexport default email;\n","import i18next from 'i18next';\n\nconst lengthIn = (min: number = 0, max: number = Infinity) => (str: string) => {\n\tif(str == null)\n\t\treturn null;\n\n\tlet context = min && max ? 'both' : max ? 'max' : 'min';\n\n\treturn str && str.length >= min && str.length <= max ? null :\n\t\ti18next.t('validators.lengthIn', {context, min, max});\n};\n\nexport default lengthIn;\n","import i18next from 'i18next';\n\nconst sameAs = (field: string) => {\n\treturn (value: string, allValues: any) => {\n\t\tif(value == null)\n\t\t\treturn null;\n\n\t\treturn allValues[field] == value ? null : i18next.t('validators.sameAs', {field});\n\t}\n};\n\nexport default sameAs;\n","import i18next from 'i18next';\n\nconst phone = (str: string) => {\n\tif(str == null)\n\t\treturn null;\n\n\treturn new RegExp('(\\\\+38)?0\\\\d{9}').test(str) ? null : i18next.t('validators.phone');\n};\n\nexport default phone;\n","import React, {useEffect} from 'react';\nimport {InjectedFormProps, reduxForm, Field} from 'redux-form';\nimport {connect, ConnectedProps} from 'react-redux';\nimport {Translation} from 'react-i18next';\n\nimport InputElement from '../../common/formElements/InputElement';\nimport DateElement from '../../common/formElements/DateElement';\nimport FileElement from '../../common/formElements/FileElement';\n\nimport {RootState} from '../../redux';\nimport {selectMeInfo} from '../../redux/me/selectors';\nimport required from '../../utils/validators/required';\nimport email from '../../utils/validators/email';\nimport lengthIn from '../../utils/validators/lengthIn';\nimport phone from '../../utils/validators/phone';\nimport sameAs from '../../utils/validators/sameAs';\nimport date from '../../utils/validators/date';\n\n\nconst mapStateToProps = (state: RootState) => ({\n\tuser: selectMeInfo(state)\n});\n\nconst connected = connect(mapStateToProps);\n\nconst minMaxPassword = lengthIn(8, 32);\nconst sameConfirm = sameAs('password');\n\nexport type IProfileEditData = {\n\temail: string,\n\tpassword: string,\n\tconfirm_password: string,\n\tphone: string,\n\tbirthday: string,\n\taddress: string,\n\tavatar: any\n};\n\ntype IOwnProps = ConnectedProps<typeof connected>;\ntype IProfileEditFormProps = InjectedFormProps<IProfileEditData, IOwnProps> & IOwnProps;\nconst ProfileEditForm: React.FC<IProfileEditFormProps> = ({handleSubmit, user, initialize}) => {\n\tuseEffect(() => {\n\t\tinitialize({email: user.email, phone: user.phone, birthday: user.birthday, address: user.address});\n\t}, []);\n\n\treturn (\n\t\t<form onSubmit={handleSubmit}>\n\t\t\t<Translation>\n\t\t\t\t{t => (\n\t\t\t\t\t<div className=\"d-md-flex\">\n\t\t\t\t\t\t<div className=\"w-100 mr-md-3\">\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\tlabel=\"Email\"\n\t\t\t\t\t\t\t\tdefaultValue={user.email}\n\t\t\t\t\t\t\t\tcomponent={InputElement}\n\t\t\t\t\t\t\t\tvalidate={[required, email]}\n\t\t\t\t\t\t\t\tautocomplete={false}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"password\"\n\t\t\t\t\t\t\t\tlabel={t('profileEdit.password')}\n\t\t\t\t\t\t\t\tcomponent={InputElement}\n\t\t\t\t\t\t\t\tvalidate={[minMaxPassword]}\n\t\t\t\t\t\t\t\tautocomplete={false}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"confirm_password\"\n\t\t\t\t\t\t\t\tlabel={t('profileEdit.confirmPassword')}\n\t\t\t\t\t\t\t\tcomponent={InputElement}\n\t\t\t\t\t\t\t\tvalidate={[sameConfirm]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"w-100 ml-md-3\">\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"phone\"\n\t\t\t\t\t\t\t\tlabel={t('profileEdit.phone')}\n\t\t\t\t\t\t\t\tdefaultValue={user.phone}\n\t\t\t\t\t\t\t\tcomponent={InputElement}\n\t\t\t\t\t\t\t\tvalidate={[phone]}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tname=\"address\"\n\t\t\t\t\t\t\t\tlabel={t('profileEdit.address')}\n\t\t\t\t\t\t\t\tdefaultValue={user.address}\n\t\t\t\t\t\t\t\tcomponent={InputElement}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tname=\"birthday\"\n\t\t\t\t\t\t\t\tlabel={t('profileEdit.birthday')}\n\t\t\t\t\t\t\t\tdefaultValue={user.birthday}\n\t\t\t\t\t\t\t\tcomponent={DateElement}\n\t\t\t\t\t\t\t\tvalidate={[date]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Translation>\n\n\t\t\t<Translation>\n\t\t\t\t{t => (\n\t\t\t\t\t<div className=\"center w-100\">\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tname=\"avatar\"\n\t\t\t\t\t\t\tlabel={t('profileEdit.avatar')}\n\t\t\t\t\t\t\tcomponent={FileElement}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</Translation>\n\t\t</form>\n\t);\n};\n\nexport default connected(reduxForm<IProfileEditData, IOwnProps>({\n\tform: 'editProfileForm'\n})(ProfileEditForm));\n","export default (vals: Object): FormData => {\n\tlet formData = new FormData();\n\n\tfor(let key in vals){\n\t\tformData.append(key, (vals as any)[key]);\n\t}\n\n\treturn formData;\n};\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\nimport {Action} from 'redux';\nimport {startSubmit, stopSubmit} from 'redux-form';\nimport {toast} from 'react-toastify';\n\nimport {RootState} from '../../';\nimport userActionsApi from '../../../utils/api/userActionsApi';\nimport {IProfileEditData} from '../../../pages/ProfileEditPage/EditProfileForm';\nimport {meLoadSuccess} from '../../me/actions';\nimport prepareProfileEditData from '../../../utils/helpers/prepareData';\nimport i18next from 'i18next';\n\n\nexport type IMeThunkAction = ThunkAction<{}, RootState, unknown, Action<any>>;\n\nconst thunkProfileEdit = (vals: IProfileEditData): IMeThunkAction => {\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\n\t\tdispatch(startSubmit('editProfileForm'));\n\n\t\ttry{\n\t\t\tconst resp = await userActionsApi.editProfile(prepareProfileEditData(vals));\n\n\t\t\tdispatch(meLoadSuccess(resp.data.newUser));\n\t\t\tdispatch(stopSubmit('editProfileForm'));\n\n\t\t\ttoast.success(i18next.t('messages.profileEdit'));\n\t\t}\n\t\tcatch (e) {\n\t\t\tdispatch(stopSubmit('editProfileForm', {\n\t\t\t\t_error: e.response?.data.message || e.message,\n\t\t\t\t...e.response?.data.errors\n\t\t\t}));\n\n\t\t\ttoast.error(e.response?.data.message || e.message);\n\t\t}\n\t};\n};\n\nexport default thunkProfileEdit;\n","import React, {useEffect} from 'react';\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\nimport {connect, ConnectedProps} from 'react-redux';\nimport {submit, isSubmitting} from 'redux-form';\nimport {useTranslation} from 'react-i18next';\n\nimport BackButton from '../../common/BackButton';\nimport ProfileEditForm, {IProfileEditData} from './EditProfileForm';\nimport {RootState} from '../../redux';\nimport thunkProfileEdit from '../../redux/profile/edit/thunks';\n\n\nconst mapStateToProps = (state: RootState) => ({\n\tsubmitting: isSubmitting('editProfileForm')(state)\n});\n\nconst connected = connect(mapStateToProps, (dispatch: any) => ({\n\tsendForm: () => dispatch(submit('editProfileForm')),\n\tedit: (vals: IProfileEditData) => dispatch(thunkProfileEdit(vals))\n}));\n\ntype IProfileEditPageProps = ConnectedProps<typeof connected>;\nconst ProfileEditPage: React.FC<IProfileEditPageProps> = ({sendForm, submitting, edit}) => {\n\tconst {t} = useTranslation();\n\n\tuseEffect(() => {\n\t\tdocument.head.title = t('profileEdit.pageTitle');\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"title\">\n\t\t\t\t{t('profileEdit.pageTitle')}\n\t\t\t</div>\n\n\t\t\t<Card className=\"mr-5\">\n\t\t\t\t<Card.Body>\n\t\t\t\t\t<ProfileEditForm onSubmit={edit}/>\n\t\t\t\t</Card.Body>\n\n\t\t\t\t<Card.Footer>\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\n\t\t\t\t\t\t<BackButton/>\n\t\t\t\t\t\t<Button variant=\"warning\" onClick={sendForm} disabled={submitting}>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsubmitting && <Spinner size=\"sm\" animation=\"border\"/>\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t{t('common.save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Row>\n\t\t\t\t</Card.Footer>\n\t\t\t</Card>\n\t\t</>\n\t);\n};\n\nexport default connected(ProfileEditPage);\n"],"sourceRoot":""}