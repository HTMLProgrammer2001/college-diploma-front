{"version":3,"sources":["common/formElements/InputElement.tsx","common/BackButton.tsx","common/ErrorElement.tsx","utils/validators/required.ts","common/SortItem.tsx","common/Paginator/index.tsx","common/UserCan.tsx","common/formElements/DateElement.tsx","utils/helpers/objToParams.ts","utils/hooks/useHttp.ts","utils/helpers/debounce.ts","common/formElements/DataListElement.tsx","common/formElements/FileElement.tsx","common/formElements/styles.module.scss","redux/rebukes/all/selectors.ts","redux/rebukes/all/actions.ts","utils/api/models/rebukesApi.ts","redux/rebukes/all/thunks.ts","pages/Rebukes/all/RebukesFilterForm.tsx","redux/rebukes/delete/selectors.ts","redux/rebukes/delete/actions.ts","redux/rebukes/delete/thunks.ts","pages/Rebukes/all/RebukeItem.tsx","pages/Rebukes/all/RebukesTable.tsx","pages/Rebukes/all/index.tsx","redux/rebukes/edit/selectors.ts","redux/rebukes/edit/thunks/thunkEditRebukeLoad.ts","redux/rebukes/edit/actions.ts","redux/rebukes/edit/thunks/thunkEditRebuke.ts","pages/Rebukes/edit/EditRebukeForm.tsx","pages/Rebukes/edit/index.tsx","redux/rebukes/add/thunks.ts","pages/Rebukes/add/AddRebukeForm.tsx","pages/Rebukes/add/index.tsx","pages/Rebukes/single/RebukeInfo.tsx","redux/rebukes/single/selectors.ts","redux/rebukes/single/thunks.ts","redux/rebukes/single/actions.ts","pages/Rebukes/single/index.tsx","pages/Rebukes/import/ImportRebukesForm.tsx","redux/rebukes/import/thunks.ts","pages/Rebukes/import/index.tsx","pages/Rebukes/index.tsx"],"names":["InputElement","onlyInValid","props","controlId","name","label","column","type","value","input","className","onChange","onFocus","onBlur","isValid","meta","touched","valid","undefined","isInvalid","error","Feedback","style","display","BackButton","history","useHistory","variant","onClick","goBack","ErrorElement","required","str","SortItem","state","change","param","cn","Paginator","totalItems","curPage","setCur","pageSize","size","hasPrev","totalPages","Math","ceil","hasNext","floor","curPaginator","Item","Array","fill","map","val","index","curItemNumber","key","active","connected","connect","user","selectMeInfo","role","children","DateElement","selected","dateFormat","showMonthDropdown","showYearDropdown","d","data","sortRules","isArray","forEach","item","Object","objKey","useHttp","useState","isLoading","setLoading","setError","setData","handler","useCallback","a","url","headers","method","Promise","res","setTimeout","axios","request","params","Authorization","localStorage","getItem","resp","response","message","debounce","fn","delay","timer","args","clearTimeout","DataListElement","id","placeholder","multiple","isFilter","query","setQuery","setSelected","reqData","useEffect","length","makeRequest","filter","includes","page","q","onInputChange","FormGroup","FormLabel","onSearch","console","log","filterBy","labelKey","maxResults","minLength","options","title","concat","emptyLabel","searchText","selectedOptions","opt","renderMenuItemChildren","option","FormControl","FileElement","onDrop","acceptedFiles","getRootProps","getInputProps","position","styles","fileDrop","fileDrop__svg","xmlns","x","y","width","height","fileDrop__rect","fileDrop__rect_2","fileDrop__label","module","exports","selectAllRebukesState","rebukes","all","selectAllRebukesSort","sort","selectAllRebukesPagination","currentPage","total","allRebukesStart","ALL_REBUKES_START","allRebukesError","ALL_REBUKES_ERROR","allRebukesSuccess","ranksResponse","ALL_REBUKES_SUCCESS","payload","allRebukesDelete","ALL_REBUKES_DELETE","client","create","baseURL","process","rebukesApi","getRebukes","filters","objToParams","get","getRebuke","editRebuke","vals","put","deleteRebuke","delete","addRebuke","post","importRebukes","formData","FormData","append","thunkAllRebukes","dispatch","getState","form","getFormValues","pagination","reduxForm","handleSubmit","onSubmit","Translation","t","Row","Field","component","Button","selectDeleteRebukes","del","deleteRebukeStart","DELETE_REBUKE_START","deleteRebukeError","DELETE_REBUKE_ERROR","deleteRebukeSuccess","DELETE_REBUKE_SUCCESS","thunkDeleteRebuke","toast","success","RebukeItem","rebuke","isDeleting","fullName","datePresentation","UserCan","Roles","VIEWER","to","MODERATOR","Spinner","animation","deleting","changeSort","field","ALL_REBUKES_CHANGE_SORT","allRebukesChangeSort","load","deleteItem","useTranslation","Table","striped","bordered","hover","minWidth","findSortRule","direction","colSpan","Loader","what","findIndex","paginator","changePage","document","Card","Body","Footer","selectEditRebukeState","edit","selectEditRebuke","thunkEditRebukeLoad","EDIT_REBUKE_LOAD_START","publication","EDIT_REBUKE_LOAD_SUCCESS","EDIT_REBUKE_LOAD_ERROR","thunkEditRebuke","startSubmit","stopSubmit","_error","errors","initialize","validate","editState","submitting","isSubmitting","loadRebuke","send","submit","IsUserRoleMore","match","EditRebukeForm","disabled","thunkAddRebuke","reset","add","AddRebukeForm","RebukeInfo","Trans","i18nKey","authors","selectRebukeSingleState","single","thunkSingleRebuke","REBUKE_SINGLE_START","REBUKE_SINGLE_SUCCESS","REBUKE_SINGLE_ERROR","thunkImportRebuke","isSubmit","ImportRebukesForm","href","target","path","exact","AllRebukesPage","AddRebukePage","ImportRebukePage","EditRebukePage","SingleRebukePage","NotFoundPage"],"mappings":"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","file":"static/js/13.a48ff954.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {WrappedFieldProps} from 'redux-form';\r\nimport {FormControl, FormGroup, FormLabel} from 'react-bootstrap';\r\n\r\n\r\ntype IInputElementProps = WrappedFieldProps & HTMLInputElement & {label: string, onlyInValid: boolean};\r\nconst InputElement: React.FC<IInputElementProps> = ({onlyInValid = true, ...props}) => {\r\n\t// useEffect(() => {\r\n\t// \tif(!props.meta.touched && props.defaultValue)\r\n\t// \t\tprops.input.onChange(props.defaultValue as any, props.name);\r\n\t// }, []);\r\n\r\n\treturn (\r\n\t\t<FormGroup controlId={props.name}>\r\n\t\t\t{\r\n\t\t\t\tprops.label &&\r\n\t\t\t\t<FormLabel column={true}>{props.label}</FormLabel>\r\n\t\t\t}\r\n\r\n\t\t<FormControl\r\n\t\t\ttype={props.type}\r\n\t\t\tname={props.name}\r\n\t\t\tvalue={props.input.value}\r\n\t\t\tclassName={props.className}\r\n\t\t\tonChange={props.input.onChange}\r\n\t\t\tonFocus={props.input.onFocus}\r\n\t\t\tonBlur={props.input.onBlur}\r\n\t\t\tisValid={!onlyInValid && props.meta.touched ? props.meta.valid : undefined}\r\n\t\t\tisInvalid={props.meta.touched ? !props.meta.valid : undefined}\r\n\t\t/>\r\n\r\n\t\t\t{\r\n\t\t\t\tprops.meta.error &&\r\n\t\t\t\t<FormControl.Feedback type=\"invalid\" style={{display: 'block'}}>\r\n\t\t\t\t\t{props.meta.touched && props.meta.error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t\t}\r\n\t\t</FormGroup>\r\n\t);\r\n};\r\n\r\nexport default InputElement;\r\n","import React from 'react';\r\nimport {Button} from 'react-bootstrap';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\nconst BackButton: React.FC<{}> = () => {\r\n\tconst history = useHistory();\r\n\r\n\treturn (\r\n\t\t<Button variant=\"light\" onClick={() => history.goBack()}>Назад</Button>\r\n\t);\r\n};\r\n\r\nexport default BackButton;\r\n","import React from 'react';\r\n\r\n\r\ntype IErrorProps = {\r\n\terror?: string\r\n};\r\n\r\nconst ErrorElement: React.FC<IErrorProps> = ({error}) => (\r\n\t<div>{error || 'Произошла ошибка'}</div>\r\n);\r\n\r\nexport default ErrorElement;\r\n","const required = (str: string) => {\r\n\treturn str ? null : 'Поле обязательно для заполнения'\r\n};\r\n\r\nexport default required;\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\n\r\n\r\ntype ISortItemProps = {\r\n\tstate: -1 | 1 | undefined,\r\n\tchange: (param: string) => void,\r\n\tparam: string\r\n};\r\n\r\nconst SortItem: React.FC<ISortItemProps> = ({state, change, param}) => (\r\n\t<i className={cn(\"fa cur pull-right\", {\r\n\t\t[\"fa-sort-amount-asc\"]: state == 1 || state == undefined,\r\n\t\t[\"fa-sort-amount-desc\"]: state == -1,\r\n\t\t[\"opacity-5\"]: state == undefined,\r\n\t})}\r\n\t   onClick={() => change(param)}\r\n\t/>\r\n);\r\n\r\nexport default SortItem;\r\n","import React from 'react';\r\nimport {Pagination} from 'react-bootstrap';\r\n\r\n\r\ntype IPaginatorProps = {\r\n\ttotalItems: number,\r\n\tcurPage: number,\r\n\tsize?: number,\r\n\tpageSize: number,\r\n\tsetCur: (page: number) => void\r\n};\r\n\r\nconst Paginator: React.FC<IPaginatorProps> = ({totalItems, curPage, setCur, pageSize, size = 5}) => {\r\n\tlet hasPrev = curPage > size,\r\n\t\ttotalPages = Math.ceil(totalItems/pageSize),\r\n\t\thasNext = totalPages > (Math.floor((curPage - 1) / size) + 1) * size,\r\n\t\tcurPaginator = Math.floor((curPage - 1) / size);\r\n\r\n\tif (totalPages <= 1)\r\n\t\treturn null;\r\n\r\n\treturn (\r\n\t\t<Pagination>\r\n\t\t\t{\r\n\t\t\t\thasPrev &&\r\n\t\t\t\t\t<Pagination.Item onClick={() => setCur((curPaginator - 1) * size + 1)}>\r\n\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t</Pagination.Item>\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\tnew Array(size).fill('').map((val, index) => {\r\n\t\t\t\t\tconst curItemNumber = curPaginator * size + index + 1;\r\n\r\n\t\t\t\t\tif(curItemNumber > totalPages)\r\n\t\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Pagination.Item\r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\tactive={curPage == curItemNumber}\r\n\t\t\t\t\t\t\tonClick={() => setCur(curItemNumber)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{curItemNumber}\r\n\t\t\t\t\t\t</Pagination.Item>\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\thasNext &&\r\n\t\t\t\t\t<Pagination.Item onClick={() => setCur((curPaginator + 1) * size + 1)}>\r\n\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t</Pagination.Item>}\r\n\t\t</Pagination>\r\n\t);\r\n};\r\n\r\nexport default Paginator;\r\n","import React from 'react';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\n\r\nimport {RootState} from '../redux';\r\nimport {selectMeInfo} from '../redux/me/selectors';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tuser: selectMeInfo(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps);\r\n\r\ntype IUserCanProps = {role: number, children: any} & ConnectedProps<typeof connected>;\r\nconst UserCan: React.FC<IUserCanProps> = ({role, children, user}) => {\r\n\treturn user.role <= role ? <>{children}</> : null;\r\n};\r\n\r\nexport default connected(UserCan);\r\n","import React from 'react';\r\nimport {WrappedFieldProps} from 'redux-form';\r\nimport DatePicker, {ReactDatePickerProps} from 'react-datepicker';\r\nimport {FormGroup, FormLabel, FormControl} from 'react-bootstrap';\r\nimport {instanceOf} from 'prop-types';\r\n\r\n\r\ntype IDateElementProps = WrappedFieldProps &\r\n\tHTMLInputElement & {label: string} & ReactDatePickerProps;\r\n\r\nconst DateElement: React.FC<IDateElementProps> = ({meta, input, name, label, className}) => (\r\n\t<FormGroup>\r\n\t\t{\r\n\t\t\tlabel &&\r\n\t\t\t\t<FormLabel column={true}>{label}</FormLabel>\r\n\t\t}\r\n\r\n\t\t<DatePicker\r\n\t\t\tselected={input.value}\r\n\t\t\tclassName={className}\r\n\t\t\tdateFormat=\"dd.MM.yyyy\"\r\n\t\t\tshowMonthDropdown={true}\r\n\t\t\tshowYearDropdown={true}\r\n\t\t\tonChange={(d: any) => input.onChange(d, name)}\r\n\t\t/>\r\n\r\n\t\t{\r\n\t\t\tmeta.touched && meta.error &&\r\n\t\t\t\t<FormControl.Feedback style={{display: 'block'}}>\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t}\r\n\t</FormGroup>\r\n);\r\n\r\nexport default DateElement;\r\n","export default (data: Object | Array<any>, name: string): Object => {\r\n\tlet sortRules: any = {};\r\n\r\n\tif(Array.isArray(data)){\r\n\t\tdata.forEach((item, index) => {\r\n\t\t\tlet key = `${name}[${index}]`;\r\n\t\t\tsortRules[key] = item;\r\n\t\t});\r\n\r\n\t\treturn sortRules;\r\n\t}\r\n\r\n\telse if(data instanceof Object){\r\n\t\tfor(let objKey in data){\r\n\t\t\tlet key = `${name}[${objKey}]`;\r\n\t\t\tsortRules[key] = (data as any)[objKey];\r\n\t\t}\r\n\r\n\t\treturn sortRules;\r\n\t}\r\n};\r\n","import axios, {Method} from 'axios';\r\nimport {useCallback, useState} from 'react';\r\n\r\n\r\ntype IHttpHandlerOptions = {\r\n\turl: string,\r\n\tmethod?: Method,\r\n\theaders?: Object,\r\n\tdata?: Object\r\n}\r\n\r\nconst useHttp = <T>() => {\r\n\tconst [isLoading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState<string>(null);\r\n\tconst [data, setData] = useState<T>(null);\r\n\r\n\tconst handler = useCallback(async ({url, headers, method, data}: IHttpHandlerOptions) => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tawait new Promise(res => {\r\n\t\t\t\tsetTimeout(res, 3000);\r\n\t\t\t});\r\n\r\n\t\t\tconst resp = await axios.request<T>({\r\n\t\t\t\tmethod, url, params: data, headers: {\r\n\t\t\t\t\t...headers,\r\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('token')}`,\r\n\t\t\t\t\t'Access-Control-Allow-Origin': '*'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsetData(resp.data);\r\n\t\t} catch (e) {\r\n\t\t\tsetError(e.response?.data.message || e.message);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t}, [isLoading, error, data]);\r\n\r\n\treturn {isLoading, error, data, request: handler};\r\n};\r\n\r\nexport default useHttp;\r\n","const debounce = (fn: Function, delay: number): any => {\r\n\tlet timer: any = null;\r\n\r\n\treturn (...args: any[]) => {\r\n\t\tif(timer)\r\n\t\t\tclearTimeout(timer);\r\n\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\tfn(...args);\r\n\t\t}, delay);\r\n\t};\r\n};\r\n\r\nexport default debounce;\r\n","import React, {useEffect, useState} from 'react';\r\nimport {AsyncTypeahead} from 'react-bootstrap-typeahead';\r\nimport {WrappedFieldProps} from 'redux-form';\r\nimport {FormControl, FormGroup, FormLabel} from 'react-bootstrap';\r\n\r\nimport useHttp from '../../utils/hooks/useHttp';\r\nimport {IGeneralPaginationResponse} from '../../interfaces/responses/IGeneralPaginationResponse';\r\nimport debounce from '../../utils/helpers/debounce';\r\n\r\n\r\ntype IDataListOwnProps = {\r\n\turl: string,\r\n\tid: string,\r\n\tplaceholder?: string,\r\n\tsize?: number,\r\n\tmultiple?: boolean,\r\n\tisFilter?: boolean\r\n};\r\n\r\ntype IOption = {\r\n\tid: number,\r\n\ttitle: string\r\n};\r\n\r\ntype IDataListElementProps = WrappedFieldProps & IDataListOwnProps;\r\nconst DataListElement: React.FC<IDataListElementProps> = (props) => {\r\n\tconst {id, placeholder, url, size = 5, multiple, isFilter, input: {onChange, name, value}} = props;\r\n\r\n\t//hooks\r\n\tconst [query, setQuery] = useState(null);\r\n\tconst [selected, setSelected] = useState<IOption[]>([]);\r\n\tconst {request, error, isLoading, data: reqData} = useHttp<IGeneralPaginationResponse<IOption>>();\r\n\r\n\t//hook query changes\r\n\tuseEffect(() => {\r\n\t\tif (query != null && query.length >= 1)\r\n\t\t\tmakeRequest();\r\n\t}, [query]);\r\n\r\n\t//hook for selected\r\n\tuseEffect(() => {\r\n\t\tif(!multiple)\r\n\t\t\tsetSelected(value ? selected.filter(({id}) => id == value) : []);\r\n\t\telse\r\n\t\t\tsetSelected(value ? selected.filter(({id}) => value.includes(id)) : []);\r\n\t}, [value]);\r\n\r\n\t//wrapper for making http request\r\n\tconst makeRequest = async (page = 1) => {\r\n\t\tconst data = {q: query, page, pageSize: size};\r\n\t\tawait request({url, data});\r\n\t};\r\n\r\n\t//input change handler\r\n\tconst onInputChange = debounce(async (query: string) => {\r\n\t\t//change cur query\r\n\t\tsetQuery(query);\r\n\t}, 500);\r\n\r\n\tconst onSelect = (selectedOptions: IOption[]) => {\r\n\t\tsetSelected(selectedOptions);\r\n\r\n\t\tif(!multiple) {\r\n\t\t\tif (!selectedOptions.length)\r\n\t\t\t\tonChange(null, name);\r\n\t\t\telse\r\n\t\t\t\tonChange(selectedOptions[0].id as any, name);\r\n\t\t}\r\n\t\telse\r\n\t\t\tonChange(selectedOptions.map((opt) => opt.id) as any, name);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormGroup controlId={id}>\r\n\t\t\t{\r\n\t\t\t\tplaceholder &&\r\n\t\t\t\t\t<FormLabel column={true}>{placeholder}</FormLabel>\r\n\t\t\t}\r\n\r\n\t\t\t<AsyncTypeahead\r\n\t\t\t\tonInputChange={onInputChange}\r\n\t\t\t\tonSearch={() => {console.log('Search')}}\r\n\t\t\t\tfilterBy={['title']}\r\n\t\t\t\tlabelKey=\"title\"\r\n\r\n\t\t\t\tid={name}\r\n\t\t\t\tmaxResults={size}\r\n\t\t\t\tminLength={1}\r\n\t\t\t\toptions={(isFilter ? [{id: -1, title: 'All'}] : []).concat(reqData?.data ? reqData.data : [])}\r\n\t\t\t\tisLoading={isLoading}\r\n\t\t\t\temptyLabel=\"No items\"\r\n\t\t\t\tsearchText=\"Search...\"\r\n\t\t\t\tisInvalid={!!error}\r\n\t\t\t\tonChange={onSelect}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\tmultiple={multiple}\r\n\r\n\t\t\t\trenderMenuItemChildren={(option: IOption) => (\r\n\t\t\t\t\t<div key={option.id}>\r\n\t\t\t\t\t\t{option.title}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\r\n\t\t\t{\r\n\t\t\t\terror &&\r\n\t\t\t\t<FormControl.Feedback type=\"invalid\" style={{display: 'block'}}>\r\n\t\t\t\t\t{props.meta.touched && error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t\t}\r\n\t\t</FormGroup>\r\n\t);\r\n};\r\n\r\nexport default DataListElement;\r\n","import React, {useState} from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport {WrappedFieldProps} from 'redux-form';\r\n\r\nimport styles from './styles.module.scss';\r\nimport {FormControl} from 'react-bootstrap';\r\n\r\n\r\ntype IFileElementProps = WrappedFieldProps & {label: string, name: string};\r\nconst FileElement: React.FC<IFileElementProps> = ({name, label, input, meta}) => {\r\n\t\tconst handler = (acceptedFiles: File[]) => {\r\n\t\t\tinput.onChange(acceptedFiles[0] as any, name);\r\n\t\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dropzone onDrop={handler}>\r\n\t\t\t\t{\r\n\t\t\t\t\t({getRootProps, getInputProps}) => (\r\n\t\t\t\t\t\t<section style={{position: 'relative'}}>\r\n\t\t\t\t\t\t\t<div {...getRootProps()} className={styles.fileDrop}>\r\n\t\t\t\t\t\t\t\t<input {...getInputProps()}/>\r\n\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName={styles.fileDrop__svg}\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\tx=\"0\"\r\n\t\t\t\t\t\t\t\t\t\ty=\"0\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={styles.fileDrop__rect}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\tx=\"0\"\r\n\t\t\t\t\t\t\t\t\t\ty=\"0\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={`${styles.fileDrop__rect} ${styles.fileDrop__rect_2}`}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\r\n\t\t\t\t\t\t\t\t<p className={styles.fileDrop__label}>\r\n\t\t\t\t\t\t\t\t\t<div>{label}</div>\r\n\t\t\t\t\t\t\t\t\t<div>{input.value?.name}</div>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</Dropzone>\r\n\r\n\t\t\t{\r\n\t\t\t\tmeta.touched && meta.error &&\r\n\t\t\t\t<FormControl.Feedback style={{display: 'block'}}>\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FileElement;\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fileDrop\":\"styles_fileDrop__3vLx4\",\"fileDrop__label\":\"styles_fileDrop__label__328fS\",\"fileDrop__svg\":\"styles_fileDrop__svg__1fjtk\",\"fileDrop__rect\":\"styles_fileDrop__rect__3KjTF\",\"fileDrop__rect_2\":\"styles_fileDrop__rect_2__3UJkx\"};","import {RootState} from '../../';\r\n\r\n\r\nexport const selectAllRebukesState = (state: RootState) => state.rebukes.all;\r\nexport const selectAllRebukes = (state: RootState) => selectAllRebukesState(state).rebukes;\r\nexport const selectAllRebukesSort = (state: RootState) => selectAllRebukesState(state).sort;\r\n\r\nexport const selectAllRebukesPagination = (state: RootState) => ({\r\n\tpageSize: selectAllRebukesState(state).pageSize,\r\n\tcurPage: selectAllRebukesState(state).currentPage,\r\n\ttotalItems: selectAllRebukesState(state).total\r\n});\r\n","import {\r\n\tALL_REBUKES_CHANGE_SORT,\r\n\tALL_REBUKES_ERROR,\r\n\tALL_REBUKES_START,\r\n\tALL_REBUKES_SUCCESS,\r\n\tALL_REBUKES_DELETE\r\n} from './types';\r\n\r\nimport {IGeneralPaginationResponse} from '../../../interfaces/responses/IGeneralPaginationResponse';\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\n\r\n\r\ntype IResponse = IGeneralPaginationResponse<IRebuke>;\r\n\r\nexport const allRebukesStart = () => <const>({\r\n\ttype: ALL_REBUKES_START\r\n});\r\n\r\nexport const allRebukesError = (error: string) => <const>({\r\n\ttype: ALL_REBUKES_ERROR,\r\n\terror\r\n});\r\n\r\nexport const allRebukesSuccess = (ranksResponse: IResponse) => <const>({\r\n\ttype: ALL_REBUKES_SUCCESS,\r\n\tpayload: ranksResponse\r\n});\r\n\r\nexport const allRebukesChangeSort = (field: string) => <const>({\r\n\ttype: ALL_REBUKES_CHANGE_SORT,\r\n\tpayload: field\r\n});\r\n\r\nexport const allRebukesDelete = (id: number) => <const>({\r\n\ttype: ALL_REBUKES_DELETE,\r\n\tpayload: id\r\n});\r\n","import axios from 'axios';\r\n\r\nimport {ISort} from '../../../interfaces/ISort';\r\nimport {IGeneralPaginationResponse} from '../../../interfaces/responses/IGeneralPaginationResponse';\r\n\r\nimport objToParams from '../../helpers/objToParams';\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\nimport {IRebukesEditData} from '../../../pages/Rebukes/edit/EditRebukeForm';\r\nimport {IRebukesAddData} from '../../../pages/Rebukes/add/AddRebukeForm';\r\nimport {IRebukesImportData} from '../../../pages/Rebukes/import/ImportRebukesForm';\r\n\r\n\r\nconst client = axios.create({\r\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/rebukes`,\r\n\theaders: {\r\n\t\t'Access-Control-Allow-Origin': '*',\r\n\t\tAuthorization: `Bearer ${localStorage.getItem('token')}`\r\n\t}\r\n});\r\n\r\nconst rebukesApi = {\r\n\tasync getRebukes(filters: any = {}, sort: ISort[] = [], page = 1, pageSize = 5) {\r\n\t\tconst sortRules = objToParams(sort, 'sort');\r\n\r\n\t\treturn await client.get<IGeneralPaginationResponse<IRebuke>>('/', {\r\n\t\t\tparams: {...filters, ...sortRules, page, pageSize}\r\n\t\t});\r\n\t},\r\n\r\n\tasync getRebuke(id: number) {\r\n\t\treturn await client.get<{data: IRebuke}>(`/${id}`);\r\n\t},\r\n\r\n\tasync editRebuke(id: number, vals: IRebukesEditData) {\r\n\t\treturn await client.put<IRebuke>(`/${id}`, vals);\r\n\t},\r\n\r\n\tasync deleteRebuke(id: number) {\r\n\t\treturn await client.delete<{ message: string }>(`/${id}`);\r\n\t},\r\n\r\n\tasync addRebuke(vals: IRebukesAddData) {\r\n\t\treturn await client.post('/add', vals);\r\n\t},\r\n\r\n\tasync importRebukes(vals: IRebukesImportData){\r\n\t\tlet formData = new FormData();\r\n\r\n\t\tfor(let key in vals){\r\n\t\t\tformData.append(key, (vals as any)[key]);\r\n\t\t}\r\n\r\n\t\treturn await client.post('/import', formData);\r\n\t}\r\n};\r\n\r\nexport default rebukesApi;\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {getFormValues} from 'redux-form';\r\n\r\nimport {RootState} from '../../';\r\nimport {IAllRebukesActions} from './reducer';\r\n\r\nimport {\r\n\tallRebukesError,\r\n\tallRebukesStart,\r\n\tallRebukesSuccess\r\n} from './actions';\r\nimport {selectAllRebukesPagination, selectAllRebukesSort} from './selectors';\r\nimport rebukesApi from '../../../utils/api/models/rebukesApi';\r\n\r\n\r\nexport type IAllRebukesThunkAction = ThunkAction<void, RootState, unknown, IAllRebukesActions>;\r\n\r\nconst thunkAllRebukes = (page: number = 1): IAllRebukesThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, IAllRebukesActions>, getState) => {\r\n\t\tdispatch(allRebukesStart());\r\n\r\n\t\ttry{\r\n\t\t\tconst form = getFormValues('rebukesFilterForm'),\r\n\t\t\t\tsort = selectAllRebukesSort(getState()),\r\n\t\t\t\tpagination = selectAllRebukesPagination(getState());\r\n\r\n\t\t\tconst resp = await rebukesApi.getRebukes(form(getState()), sort, page, pagination.pageSize);\r\n\t\t\tdispatch(allRebukesSuccess(resp.data));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(allRebukesError(e.message));\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkAllRebukes;\r\n","import React from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\nimport {Button, Row} from 'react-bootstrap';\r\n\r\nimport InputElement from '../../../common/formElements/InputElement';\r\nimport DataListElement from '../../../common/formElements/DataListElement';\r\nimport DateElement from '../../../common/formElements/DateElement';\r\n\r\n\r\nexport type IRebukesFilterData = {\r\n\tfilterUser: number,\r\n\tfilterTitle: string,\r\n\tfilterFrom: string,\r\n\tfilterTo: string,\r\n\tfilterType: number\r\n};\r\n\r\ntype IRebukesFilterFormProps = InjectedFormProps<IRebukesFilterData>;\r\nconst RebukesFilterForm: React.FC<IRebukesFilterFormProps> = ({handleSubmit}) => (\r\n\t<form onSubmit={handleSubmit} className=\"w-100 center flex-column my-3\">\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={DataListElement}\r\n\t\t\t\t\t\tname=\"filterUser\"\r\n\t\t\t\t\t\tid=\"filterUser\"\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tplaceholder={t('rebukes.all.filterUser')}\r\n\t\t\t\t\t\turl={`${process.env.REACT_APP_SERVER_URL}/search/users`}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"filterTitle\"\r\n\t\t\t\t\t\tclassName=\"w-100 ml-1\"\r\n\t\t\t\t\t\tlabel={t('rebukes.all.filterName')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\tname=\"filterFrom\"\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tlabel={t('rebukes.all.filterFrom')}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\tname=\"filterTo\"\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tlabel={t('rebukes.all.filterTo')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button variant=\"info\" type=\"submit\">\r\n\t\t\t\t\t\t{t('common.search')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\t</form>\r\n);\r\n\r\nexport default reduxForm<IRebukesFilterData>({\r\n\tform: 'rebukesFilterForm'\r\n})(RebukesFilterForm);\r\n","import {RootState} from '../../';\r\n\r\n\r\nexport const selectDeleteRebukes = (state: RootState) => state.rebukes.del;\r\n","import {\r\n\tDELETE_REBUKE_ERROR,\r\n\tDELETE_REBUKE_START,\r\n\tDELETE_REBUKE_SUCCESS\r\n} from './types';\r\n\r\n\r\nexport const deleteRebukeStart = (id: number) => <const>({\r\n\ttype: DELETE_REBUKE_START,\r\n\tpayload: id\r\n});\r\n\r\nexport const deleteRebukeError = (id: number, error: string) => <const>({\r\n\ttype: DELETE_REBUKE_ERROR,\r\n\terror,\r\n\tpayload: id\r\n});\r\n\r\nexport const deleteRebukeSuccess = (id: number) => <const>({\r\n\ttype: DELETE_REBUKE_SUCCESS,\r\n\tpayload: id\r\n});\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../index';\r\nimport {IDeleteRebukeActions} from './reducer';\r\n\r\nimport {deleteRebukeError, deleteRebukeStart, deleteRebukeSuccess} from './actions';\r\nimport {allRebukesDelete} from '../all/actions';\r\nimport rebukesApi from '../../../utils/api/models/rebukesApi';\r\n\r\n\r\ntype IActions = IDeleteRebukeActions | ReturnType<typeof allRebukesDelete>;\r\nexport type IRebukeEditThunkAction = ThunkAction<void, RootState, unknown, IActions>;\r\n\r\nconst thunkDeleteRebuke = (id: number): IRebukeEditThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, IActions>) => {\r\n\t\tdispatch(deleteRebukeStart(id));\r\n\r\n\t\ttry{\r\n\t\t\tawait rebukesApi.deleteRebuke(id);\r\n\r\n\t\t\tdispatch(deleteRebukeSuccess(id));\r\n\t\t\tdispatch(allRebukesDelete(id));\r\n\t\t\ttoast.success(`Выговор с id ${id} удален`);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(deleteRebukeError(id, e.response?.data.message || e.message));\r\n\t\t\ttoast.error(`Ошибка: ${e.response?.data.message || e.message}`);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkDeleteRebuke;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Spinner} from 'react-bootstrap';\r\n\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport UserCan from '../../../common/UserCan';\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\n\r\n\r\ntype IRebukeItemProps = {\r\n\trebuke: IRebuke,\r\n\tisDeleting: boolean,\r\n\tdel: (id: number) => void\r\n};\r\n\r\nconst RebukeItem: React.FC<IRebukeItemProps> = ({rebuke, isDeleting, del}) => (\r\n\t<tr>\r\n\t\t<th>{rebuke.id}</th>\r\n\t\t<th>{rebuke.user.fullName}</th>\r\n\t\t<th>{rebuke.title}</th>\r\n\t\t<th>{rebuke.datePresentation}</th>\r\n\t\t<th>\r\n\t\t\t<UserCan role={Roles.VIEWER}>\r\n\t\t\t\t<Link to={`/rebukes/${rebuke.id}`}>\r\n\t\t\t\t\t<i className=\"fa fa-eye\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</UserCan>\r\n\r\n\t\t\t<UserCan role={Roles.MODERATOR}>\r\n\t\t\t\t<Link to={`/rebukes/${rebuke.id}/edit`}>\r\n\t\t\t\t\t<i className=\"fa fa-pencil\"/>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tisDeleting ?\r\n\t\t\t\t\t\t<Link to=\"#\">\r\n\t\t\t\t\t\t\t<i className=\"fa fa-close\" onClick={() => del(rebuke.id)}/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Spinner animation=\"border\" size=\"sm\"/>\r\n\t\t\t\t}\r\n\t\t\t</UserCan>\r\n\t\t</th>\r\n\t</tr>\r\n);\r\n\r\nexport default RebukeItem;\r\n","import React, {useEffect} from 'react';\r\nimport {Table} from 'react-bootstrap';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\n\r\nimport SortItem from '../../../common/SortItem';\r\nimport Loader from '../../../common/Loader/Loader';\r\nimport ErrorElement from '../../../common/ErrorElement';\r\nimport findSortRule from '../../../utils/helpers/findSortRule';\r\nimport {selectAllRebukesState} from '../../../redux/rebukes/all/selectors';\r\nimport {selectDeleteRebukes} from '../../../redux/rebukes/delete/selectors';\r\nimport {allRebukesChangeSort} from '../../../redux/rebukes/all/actions';\r\nimport thunkAllRebukes from '../../../redux/rebukes/all/thunks';\r\nimport thunkDeleteRebuke from '../../../redux/rebukes/delete/thunks';\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\nimport RebukeItem from './RebukeItem';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\t...selectAllRebukesState(state),\r\n\tdeleting: selectDeleteRebukes(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n\tchangeSort(field: string) {\r\n\t\tdispatch(allRebukesChangeSort(field));\r\n\t\tdispatch(thunkAllRebukes(1));\r\n\t},\r\n\tload(page = 1) {\r\n\t\tdispatch(thunkAllRebukes(page));\r\n\t},\r\n\tdeleteItem(id: number) {\r\n\t\tdispatch(thunkDeleteRebuke(id));\r\n\t}\r\n});\r\n\r\nconst connected = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype IRebukesTableProps = ConnectedProps<typeof connected>;\r\nconst RebukesTable: React.FC<IRebukesTableProps> = (props) => {\r\n\tuseEffect(() => {\r\n\t\tif (!props.isLoading && !props.rebukes.length)\r\n\t\t\tprops.load();\r\n\t}, []);\r\n\r\n\tconst {t} = useTranslation();\r\n\r\n\treturn (\r\n\t\t<div className=\"table-wrapper\">\r\n\t\t\t<Table striped bordered hover style={{minWidth: \"600px\"}}>\r\n\t\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<span className=\"pull-left\">ID</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'ID')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"ID\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t<span className=\"pull-left\">\r\n\t\t\t\t\t\t{t('rebukes.all.user')}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'user')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"user\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<span className=\"pull-left\">\r\n\t\t\t\t\t\t\t{t('rebukes.all.title')}\r\n\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'title')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"title\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t<span className=\"pull-left\">\r\n\t\t\t\t\t\t{t('rebukes.all.date')}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'datePresentation')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"datePresentation\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>{t('common.actions')}</th>\r\n\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.isLoading &&\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th colSpan={6} className=\"text-center\">\r\n\t\t\t\t\t\t\t<Loader/>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.error &&\r\n\t\t\t\t\t<tr className=\"text-center text-danger\">\r\n\t\t\t\t\t\t<th colSpan={6} className=\"text-center\">\r\n\t\t\t\t\t\t\t<ErrorElement error={props.error}/>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t!props.isLoading && !props.error && !props.rebukes.length &&\r\n\t\t\t\t\t<tr className=\"font-weight-bold text-center\">\r\n\t\t\t\t\t\t<th colSpan={6} className=\"text-center\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tt('common.noItems', {\r\n\t\t\t\t\t\t\t\t\twhat: t('rebukes.all.noForm')\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t!props.isLoading && !props.error &&\r\n\t\t\t\t\tprops.rebukes.map((rebuke: IRebuke) => (\r\n\t\t\t\t\t\t<RebukeItem\r\n\t\t\t\t\t\t\tkey={rebuke.id}\r\n\t\t\t\t\t\t\trebuke={rebuke}\r\n\t\t\t\t\t\t\tisDeleting={props.deleting.findIndex((id: number) => id == rebuke.id) == -1}\r\n\t\t\t\t\t\t\tdel={props.deleteItem}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t\t</tbody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default connected(RebukesTable);\r\n","import React, {useEffect} from 'react';\r\nimport {Button, Card, Row} from 'react-bootstrap';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\n\r\nimport BackButton from '../../../common/BackButton';\r\nimport Paginator from '../../../common/Paginator';\r\nimport UserCan from '../../../common/UserCan';\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport {selectAllRebukesPagination} from '../../../redux/rebukes/all/selectors';\r\nimport thunkAllRebukes from '../../../redux/rebukes/all/thunks';\r\nimport RebukesFilterForm from './RebukesFilterForm';\r\nimport RebukesTable from './RebukesTable';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tpaginator: selectAllRebukesPagination(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {changePage: thunkAllRebukes});\r\n\r\ntype IAllHonorsPageProps = ConnectedProps<typeof connected>;\r\nconst AllHonorsPage: React.FC<IAllHonorsPageProps> = ({changePage, paginator}) => {\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = t('rebukes.all.pageTitle');\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('rebukes.name')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<div className=\"model__filter-form\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<UserCan role={Roles.MODERATOR}>\r\n\t\t\t\t\t\t\t\t<Link to=\"/rebukes/add\">\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"success\">\r\n\t\t\t\t\t\t\t\t\t\t{t('common.add')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</UserCan>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<UserCan role={Roles.MODERATOR}>\r\n\t\t\t\t\t\t\t\t<Link to=\"/rebukes/import\">\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t{t('common.import')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</UserCan>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<RebukesFilterForm onSubmit={() => changePage(1)}/>\r\n\r\n\t\t\t\t\t<div className=\"d-flex justify-content-center w-100\">\r\n\t\t\t\t\t\t<RebukesTable/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"d-flex my-3 justify-content-end w-100\">\r\n\t\t\t\t\t\t<Paginator {...paginator} setCur={changePage}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default connected(AllHonorsPage);\r\n","import {RootState} from '../../index';\r\n\r\n\r\nexport const selectEditRebukeState = (state: RootState) => state.rebukes.edit;\r\nexport const selectEditRebuke = (state: RootState) => selectEditRebukeState(state).rebuke;\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\n\r\nimport {IEditRebukeActions} from '../reducer';\r\nimport {RootState} from '../../../';\r\n\r\nimport {editRebukeLoadStart, editRebukeLoadError, editRebukeLoadSuccess} from '../actions';\r\nimport rebukesApi from '../../../../utils/api/models/rebukesApi';\r\n\r\n\r\nexport type IEditRebukeLoadThunkAction = ThunkAction<void, RootState, unknown, IEditRebukeActions>;\r\n\r\nconst thunkEditRebukeLoad = (id: number): IEditRebukeLoadThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, IEditRebukeActions>) => {\r\n\t\tdispatch(editRebukeLoadStart());\r\n\r\n\t\ttry{\r\n\t\t\tconst resp = await rebukesApi.getRebuke(id);\r\n\t\t\tdispatch(editRebukeLoadSuccess(resp.data.data));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(editRebukeLoadError(e.response?.data.message || e.message));\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkEditRebukeLoad;\r\n","import {\r\n\tEDIT_REBUKE_LOAD_ERROR,\r\n\tEDIT_REBUKE_LOAD_START,\r\n\tEDIT_REBUKE_LOAD_SUCCESS\r\n} from './types';\r\n\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\n\r\n\r\nexport const editRebukeLoadStart = () => <const>({\r\n\ttype: EDIT_REBUKE_LOAD_START\r\n});\r\n\r\nexport const editRebukeLoadError = (error: string) => <const>({\r\n\ttype: EDIT_REBUKE_LOAD_ERROR,\r\n\terror\r\n});\r\n\r\nexport const editRebukeLoadSuccess = (publication: IRebuke) => <const>({\r\n\ttype: EDIT_REBUKE_LOAD_SUCCESS,\r\n\tpayload: publication\r\n});\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {startSubmit, stopSubmit} from 'redux-form';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../../index';\r\nimport rebukesApi from '../../../../utils/api/models/rebukesApi';\r\n\r\n\r\nexport type IRebukeEditThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkEditRebuke = (id: number, vals: any): IRebukeEditThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(startSubmit('rebukesEditForm'));\r\n\r\n\t\ttry{\r\n\t\t\tawait rebukesApi.editRebuke(id, vals);\r\n\r\n\t\t\tdispatch(stopSubmit('rebukesEditForm'));\r\n\t\t\ttoast.success('Выговор отредактирован');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(stopSubmit('rebukesEditForm', {\r\n\t\t\t\t_error: e.response?.data.message || e.message,\r\n\t\t\t\t...e.response?.data.errors\r\n\t\t\t}));\r\n\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkEditRebuke;\r\n","import React, {useEffect} from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\n\r\nimport InputElement from '../../../common/formElements/InputElement';\r\nimport required from '../../../utils/validators/required';\r\nimport DateElement from '../../../common/formElements/DateElement';\r\nimport DataListElement from '../../../common/formElements/DataListElement';\r\nimport {RootState} from '../../../redux';\r\nimport {selectEditRebuke} from '../../../redux/rebukes/edit/selectors';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\trebuke: selectEditRebuke(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps);\r\n\r\nexport type IRebukesEditData = {\r\n\torder: string,\r\n\tdatePresentation: string,\r\n\ttitle: string,\r\n\tuser: number\r\n};\r\n\r\ntype IOwnProps = ConnectedProps<typeof connected>;\r\n\r\ntype IRebukesEditFormProps = InjectedFormProps<IRebukesEditData, IOwnProps> & IOwnProps;\r\nconst RebukesEditForm: React.FC<IRebukesEditFormProps> = (props) => {\r\n\tconst {handleSubmit, error, initialize, rebuke} = props;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tinitialize({...rebuke, datePresentation: null} as any);\r\n\t}, []);\r\n\t\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit}>\r\n\r\n\t\t\t{\r\n\t\t\t\terror &&\r\n\t\t\t\t<div>{error}</div>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"d-md-flex w-100\">\r\n\t\t\t\t<Translation>\r\n\t\t\t\t\t{t => (\r\n\t\t\t\t\t\t<div className=\"w-100 pr-3\">\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tlabel={t('rebukes.edit.title')}\r\n\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"order\"\r\n\t\t\t\t\t\t\t\tlabel={t('rebukes.edit.order')}\r\n\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Translation>\r\n\r\n\t\t\t\t<Translation>\r\n\t\t\t\t\t{t => (\r\n\t\t\t\t\t\t<div className=\"w-100 pl-3\">\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\t\t\tname=\"datePresentation\"\r\n\t\t\t\t\t\t\t\tclassName=\"mb-2\"\r\n\t\t\t\t\t\t\t\tlabel={t('rebukes.edit.date')}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={DataListElement}\r\n\t\t\t\t\t\t\t\tname=\"user\"\r\n\t\t\t\t\t\t\t\tplaceholder={t('rebukes.edit.user')}\r\n\t\t\t\t\t\t\t\turl={`${process.env.REACT_APP_SERVER_URL}/search/users`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Translation>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default connected(\r\n\t\treduxForm<IRebukesEditData, IOwnProps>({\r\n\t\t\tform: 'rebukesEditForm'\r\n\t\t})(RebukesEditForm)\r\n);\r\n","import React, {useEffect} from 'react';\r\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {RouteComponentProps} from 'react-router-dom';\r\nimport {isSubmitting, submit} from 'redux-form';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\nimport BackButton from '../../../common/BackButton';\r\nimport ErrorElement from '../../../common/ErrorElement';\r\nimport Loader from '../../../common/Loader/Loader';\r\nimport IsUserRoleMore from '../../../utils/HOC/IsUserRoleMore';\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport {selectEditRebukeState} from '../../../redux/rebukes/edit/selectors';\r\nimport thunkEditRebukeLoad from '../../../redux/rebukes/edit/thunks/thunkEditRebukeLoad';\r\nimport thunkEditRebuke from '../../../redux/rebukes/edit/thunks/thunkEditRebuke';\r\nimport EditRebukeForm, {IRebukesEditData} from './EditRebukeForm';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\teditState: selectEditRebukeState(state),\r\n\tsubmitting: isSubmitting('rebukesEditForm')(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {\r\n\tloadRebuke: thunkEditRebukeLoad,\r\n\tsend: submit,\r\n\teditRebuke: thunkEditRebuke\r\n});\r\n\r\ntype IEditRebukePageProps = ConnectedProps<typeof connected> & RouteComponentProps<{id?: string}>;\r\nconst EditRebukePage: React.FC<IEditRebukePageProps> = ({editState, loadRebuke, ...props}) => {\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tloadRebuke(+props.match.params.id);\r\n\t\tdocument.title = t('rebukes.edit.pageTitle');\r\n\t}, []);\r\n\r\n\tconst clickHandler = () => {\r\n\t\tprops.send('rebukesEditForm');\r\n\t};\r\n\r\n\tconst submitHandler = (vals: IRebukesEditData) => {\r\n\t\tprops.editRebuke(+props.match.params.id, vals);\r\n\t};\r\n\r\n\tif(!editState.rebuke && !editState.isLoading)\r\n\t\treturn null;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">{t('rebukes.edit.pageTitle')}</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\teditState.isLoading &&\r\n\t\t\t\t\t\t\t<Loader/>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editState.isLoading && editState.error &&\r\n\t\t\t\t\t\t\t<ErrorElement error={editState.error}/>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editState.isLoading && !editState.error &&\r\n\t\t\t\t\t\t\t<EditRebukeForm onSubmit={submitHandler}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!editState.isLoading && !editState.error &&\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"warning\"\r\n\t\t\t\t\t\t\t\t\tonClick={clickHandler}\r\n\t\t\t\t\t\t\t\t\tdisabled={props.submitting}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tprops.submitting &&\r\n\t\t\t\t\t\t\t\t\t\t\t<Spinner animation=\"border\" size=\"sm\"/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t{t('common.edit')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default IsUserRoleMore(Roles.MODERATOR, true)(connected(EditRebukePage));\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {reset, startSubmit, stopSubmit} from 'redux-form';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../index';\r\nimport rebukesApi from '../../../utils/api/models/rebukesApi';\r\n\r\n\r\nexport type IAddRebukeThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkAddRebuke = (vals: any): IAddRebukeThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(startSubmit('rebukesAddForm'));\r\n\r\n\t\ttry{\r\n\t\t\tawait rebukesApi.addRebuke(vals);\r\n\t\t\tdispatch(stopSubmit('rebukesAddForm'));\r\n\t\t\tdispatch(reset('rebukesAddForm'));\r\n\r\n\t\t\ttoast.success('Выговор добавлен');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(stopSubmit('rebukesAddForm', {\r\n\t\t\t\t_error: e.response?.data.message || e.message,\r\n\t\t\t\t...e.response?.data.errors\r\n\t\t\t}));\r\n\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkAddRebuke;\r\n","import React from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\n\r\nimport InputElement from '../../../common/formElements/InputElement';\r\nimport required from '../../../utils/validators/required';\r\nimport DateElement from '../../../common/formElements/DateElement';\r\nimport DataListElement from '../../../common/formElements/DataListElement';\r\n\r\n\r\nexport type IRebukesAddData = {\r\n\torder: string,\r\n\tdatePresentation: string,\r\n\ttitle: string,\r\n\tuser: number\r\n};\r\n\r\ntype IRebukesAddFormProps = InjectedFormProps<IRebukesAddData>;\r\nconst RebukesAddForm: React.FC<IRebukesAddFormProps> = ({handleSubmit, error}) => (\r\n\t<form onSubmit={handleSubmit}>\r\n\r\n\t\t{\r\n\t\t\terror &&\r\n\t\t\t\t<div>{error}</div>\r\n\t\t}\r\n\t\t\r\n\t\t<div className=\"d-md-flex w-100\">\r\n\t\t\t<Translation>\r\n\t\t\t\t{t => (\r\n\t\t\t\t\t<div className=\"w-100 pr-3\">\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\tlabel={t('rebukes.add.title')}\r\n\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"order\"\r\n\t\t\t\t\t\t\tlabel={t('rebukes.add.order')}\r\n\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Translation>\r\n\r\n\t\t\t<Translation>\r\n\t\t\t\t{t => (\r\n\t\t\t\t\t<div className=\"w-100 pl-3\">\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\t\tname=\"datePresentation\"\r\n\t\t\t\t\t\t\tlabel={t('rebukes.add.date')}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={DataListElement}\r\n\t\t\t\t\t\t\tname=\"user\"\r\n\t\t\t\t\t\t\tplaceholder={t('rebukes.add.user')}\r\n\t\t\t\t\t\t\turl={`${process.env.REACT_APP_SERVER_URL}/search/users`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Translation>\r\n\t\t</div>\r\n\t</form>\r\n);\r\n\r\nexport default reduxForm<IRebukesAddData>({\r\n\tform: 'rebukesAddForm'\r\n})(RebukesAddForm);\r\n","import React, {useEffect} from 'react';\r\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\r\nimport {ConnectedProps, connect} from 'react-redux';\r\nimport {submit, isSubmitting} from 'redux-form';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\nimport BackButton from '../../../common/BackButton';\r\nimport IsUserRoleMore from '../../../utils/HOC/IsUserRoleMore';\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport thunkAddRebuke from '../../../redux/rebukes/add/thunks';\r\nimport AddRebukeForm from './AddRebukeForm';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tsubmitting: isSubmitting('rebukesAddForm')(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {\r\n\tadd: thunkAddRebuke,\r\n\tsend: submit\r\n});\r\n\r\ntype IAddRebukePageProps = ConnectedProps<typeof connected>;\r\nconst AddRebukePage: React.FC<IAddRebukePageProps> = ({add, send, submitting}) => {\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = t('rebukes.add.pageTitle');\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('rebukes.add.pageTitle')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<AddRebukeForm onSubmit={add}/>\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tonClick={() => send('rebukesAddForm')}\r\n\t\t\t\t\t\t\tdisabled={submitting}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{submitting && <Spinner size=\"sm\" animation=\"border\"/>}\r\n\t\t\t\t\t\t\t{t('common.add')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default IsUserRoleMore(Roles.MODERATOR, true)(connected(AddRebukePage));\r\n","import React from 'react';\r\nimport {Trans} from 'react-i18next';\r\n\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\n\r\n\r\ntype IRebukeInfoProps = {\r\n\trebuke: IRebuke\r\n}\r\n\r\nconst RebukeInfo: React.FC<IRebukeInfoProps> = ({rebuke}) => (\r\n\t<div>\r\n\t\t<Trans i18nKey=\"rebukes.single.id\">\r\n\t\t\t<div>ID: {{id: rebuke.id}}</div>\r\n\t\t</Trans>\r\n\r\n\t\t<Trans i18nKey=\"rebukes.single.user\">\r\n\t\t\t<div>User: {{authors: rebuke.user.fullName}}</div>\r\n\t\t</Trans>\r\n\r\n\t\t<Trans i18nKey=\"rebukes.single.title\">\r\n\t\t\t<div>Title: {{title: rebuke.title}}</div>\r\n\t\t</Trans>\r\n\r\n\t\t<Trans i18nKey=\"rebukes.single.date\">\r\n\t\t\t<div>Date of rebuke: {{id: rebuke.datePresentation}}</div>\r\n\t\t</Trans>\r\n\t</div>\r\n);\r\n\r\nexport default RebukeInfo;\r\n","import {RootState} from '../../';\r\n\r\n\r\nexport const selectRebukeSingleState = (state: RootState) => state.rebukes.single;\r\nexport const selectRebukeSingle = (state: RootState) => selectRebukeSingleState(state).rebuke;\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../';\r\nimport {rebukeSingleError, rebukeSingleStart, rebukeSingleSuccess} from './actions';\r\nimport rebukesApi from '../../../utils/api/models/rebukesApi';\r\n\r\n\r\nexport type IRebukeSingleThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkSingleRebuke = (id: number): IRebukeSingleThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(rebukeSingleStart());\r\n\r\n\t\ttry{\r\n\t\t\tconst resp = await rebukesApi.getRebuke(id);\r\n\t\t\tdispatch(rebukeSingleSuccess(resp.data.data));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(rebukeSingleError(e.response?.data.message || e.message));\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkSingleRebuke;\r\n","import {\r\n\tREBUKE_SINGLE_ERROR,\r\n\tREBUKE_SINGLE_START,\r\n\tREBUKE_SINGLE_SUCCESS\r\n} from './types';\r\nimport {IRebuke} from '../../../interfaces/models/IRebuke';\r\n\r\n\r\nexport const rebukeSingleStart = () => <const>({\r\n\ttype: REBUKE_SINGLE_START\r\n});\r\n\r\nexport const rebukeSingleError = (error: string) => <const>({\r\n\ttype: REBUKE_SINGLE_ERROR,\r\n\terror\r\n});\r\n\r\nexport const rebukeSingleSuccess = (rebuke: IRebuke) => <const>({\r\n\ttype: REBUKE_SINGLE_SUCCESS,\r\n\tpayload: rebuke\r\n});\r\n","import React, {useEffect} from 'react';\r\nimport {RouteComponentProps} from 'react-router';\r\nimport {Button, Card, Row} from 'react-bootstrap';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\n\r\nimport BackButton from '../../../common/BackButton';\r\nimport {RootState} from '../../../redux';\r\nimport Loader from '../../../common/Loader/Loader';\r\nimport RebukeInfo from './RebukeInfo';\r\nimport ErrorElement from '../../../common/ErrorElement';\r\nimport {selectRebukeSingleState} from '../../../redux/rebukes/single/selectors';\r\nimport thunkSingleRebuke from '../../../redux/rebukes/single/thunks';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\t...selectRebukeSingleState(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {load: thunkSingleRebuke});\r\n\r\ntype ISingleRebukePageProps = RouteComponentProps<{id: string}> & ConnectedProps<typeof connected>;\r\nconst SingleRebukePage: React.FC<ISingleRebukePageProps> = (props) => {\r\n\tconst {match, isLoading, error, rebuke, load} = props;\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tload(+match.params.id);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('rebukes.single.pageTitle')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t{isLoading && <Loader/>}\r\n\t\t\t\t\t{!isLoading && error && <ErrorElement error={error}/>}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!isLoading && !error && rebuke &&\r\n\t\t\t\t\t\t\t<RebukeInfo rebuke={rebuke}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t<Link to={`/rebukes/${match.params.id}/edit`}>\r\n\t\t\t\t\t\t\t<Button variant=\"warning\">\r\n\t\t\t\t\t\t\t\t{t('common.edit')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default connected(SingleRebukePage);\r\n","import React from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\n\r\nimport FileElement from '../../../common/formElements/FileElement';\r\nimport required from '../../../utils/validators/required';\r\n\r\n\r\nexport type IRebukesImportData = {\r\n\timportFile: File\r\n};\r\n\r\ntype IRebukesImportFormProps = InjectedFormProps<IRebukesImportData>;\r\nconst RebukesImportForm: React.FC<IRebukesImportFormProps> = ({handleSubmit, error}) => (\r\n\t<form onSubmit={handleSubmit} className=\"w-50\">\r\n\r\n\t\t{\r\n\t\t\terror &&\r\n\t\t\t<div>{error}</div>\r\n\t\t}\r\n\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<div className=\"center w-100\">\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tname=\"importFile\"\r\n\t\t\t\t\t\tlabel={t('common.importFile')}\r\n\t\t\t\t\t\tcomponent={FileElement}\r\n\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\t</form>\r\n);\r\n\r\nexport default reduxForm<IRebukesImportData>({\r\n\tform: 'rebukesImportForm'\r\n})(RebukesImportForm);\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {reset, startSubmit, stopSubmit} from 'redux-form';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../';\r\nimport rebukesApi from '../../../utils/api/models/rebukesApi';\r\n\r\n\r\nexport type IImportRebukeThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkImportRebuke = (vals: any): IImportRebukeThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(startSubmit('rebukesImportForm'));\r\n\r\n\t\ttry{\r\n\t\t\tawait rebukesApi.importRebukes(vals);\r\n\t\t\tdispatch(stopSubmit('rebukesImportForm'));\r\n\t\t\tdispatch(reset('rebukesImportForm'));\r\n\r\n\t\t\ttoast.success('Выговоры импортированы');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(stopSubmit('rebukesImportForm', {\r\n\t\t\t\t_error: e.response?.data.message || e.message,\r\n\t\t\t\t...e.response?.data.errors\r\n\t\t\t}));\r\n\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkImportRebuke;\r\n","import React from 'react';\r\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {isSubmitting, submit} from 'redux-form';\r\n\r\nimport BackButton from '../../../common/BackButton';\r\nimport ImportRebukesForm from './ImportRebukesForm';\r\nimport {RootState} from '../../../redux';\r\nimport thunkImportRebuke from '../../../redux/rebukes/import/thunks';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tisSubmit: isSubmitting('rebukesImportForm')(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {\r\n\timportRebukes: thunkImportRebuke,\r\n\tsend: () => submit('rebukesImportForm')\r\n});\r\n\r\ntype IImportRebukesPageProps = ConnectedProps<typeof connected>;\r\nconst ImportRebukesPage: React.FC<IImportRebukesPageProps> = (props) => {\r\n\tconst {isSubmit, importRebukes, send} = props;\r\n\tconst {t} = useTranslation();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('rebukes.import.pageTitle')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body className=\"d-flex flex-column align-items-center\">\r\n\t\t\t\t\t<ImportRebukesForm onSubmit={importRebukes}/>\r\n\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`${process.env.REACT_APP_SERVER_URL}/examples/rebukes`}\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t\t>{t('common.downloadExample')}</a>\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tonClick={send}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isSubmit && <Spinner animation=\"border\" size=\"sm\"/>}\r\n\r\n\t\t\t\t\t\t\t<span className=\"mr-1\">\r\n\t\t\t\t\t\t\t\t{t('common.import')}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default connected(ImportRebukesPage);\r\n","import React from 'react';\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\nimport NotFoundPage from '../ErrorPages/NotFoundPage';\r\nimport AllRebukesPage from './all';\r\nimport EditRebukePage from './edit';\r\nimport AddRebukePage from './add';\r\nimport SingleRebukePage from './single';\r\nimport ImportRebukePage from './import';\r\n\r\nimport IsUserRoleMore from '../../utils/HOC/IsUserRoleMore';\r\nimport {Roles} from '../../utils/helpers/RoleCodeToName';\r\n\r\n\r\nconst Rebukes: React.FC<{}> = () => (\r\n\t<Switch>\r\n\t\t<Route path=\"/rebukes\" exact component={AllRebukesPage}/>\r\n\t\t<Route path=\"/rebukes/add\" exact component={AddRebukePage}/>\r\n\t\t<Route path=\"/rebukes/import\" exact component={ImportRebukePage}/>\r\n\t\t<Route path=\"/rebukes/:id/edit\" exact component={EditRebukePage}/>\r\n\t\t<Route path=\"/rebukes/:id\" exact component={SingleRebukePage}/>\r\n\t\t<Route path=\"/\" component={NotFoundPage}/>\r\n\t</Switch>\r\n);\r\n\r\nexport default IsUserRoleMore(Roles.VIEWER, true)(Rebukes);\r\n"],"sourceRoot":""}