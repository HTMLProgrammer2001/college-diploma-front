{"version":3,"sources":["common/formElements/InputElement.tsx","common/BackButton.tsx","common/ErrorElement.tsx","utils/validators/required.ts","common/SortItem.tsx","common/Paginator/index.tsx","common/UserCan.tsx","common/formElements/DateElement.tsx","utils/helpers/objToParams.ts","utils/hooks/useHttp.ts","utils/helpers/debounce.ts","common/formElements/DataListElement.tsx","common/formElements/FileElement.tsx","common/formElements/styles.module.scss","redux/honors/all/selectors.ts","redux/honors/all/actions.ts","utils/api/models/honorsApi.ts","redux/honors/all/thunks.ts","pages/Honors/all/HonorsFilterForm.tsx","pages/Honors/all/HonorItem.tsx","redux/honors/delete/selectors.ts","redux/honors/delete/actions.ts","redux/honors/delete/thunks.ts","pages/Honors/all/HonorsTable.tsx","pages/Honors/all/index.tsx","redux/honors/edit/selectors.ts","redux/honors/edit/thunks/thunkEditHonorLoad.ts","redux/honors/edit/actions.ts","redux/honors/edit/thunks/thunkEditHonor.ts","pages/Honors/edit/EditHonorForm.tsx","pages/Honors/edit/index.tsx","redux/honors/add/thunks.ts","pages/Honors/add/AddHonorForm.tsx","pages/Honors/add/index.tsx","pages/Honors/single/HonorInfo.tsx","redux/honors/single/selectors.ts","redux/honors/single/thunks.ts","redux/honors/single/actions.ts","pages/Honors/single/index.tsx","pages/Honors/import/ImportHonorsForm.tsx","redux/honors/import/thunks.ts","pages/Honors/import/index.tsx","pages/Honors/index.tsx"],"names":["InputElement","onlyInValid","props","controlId","name","label","column","type","value","input","className","onChange","onFocus","onBlur","isValid","meta","touched","valid","undefined","isInvalid","error","Feedback","style","display","BackButton","history","useHistory","variant","onClick","goBack","ErrorElement","required","str","SortItem","state","change","param","cn","Paginator","totalItems","curPage","setCur","pageSize","size","hasPrev","totalPages","Math","ceil","hasNext","floor","curPaginator","Item","Array","fill","map","val","index","curItemNumber","key","active","connected","connect","user","selectMeInfo","role","children","DateElement","selected","dateFormat","showMonthDropdown","showYearDropdown","d","data","sortRules","isArray","forEach","item","Object","objKey","useHttp","useState","isLoading","setLoading","setError","setData","handler","useCallback","a","url","headers","method","Promise","res","setTimeout","axios","request","params","Authorization","localStorage","getItem","resp","response","message","debounce","fn","delay","timer","args","clearTimeout","DataListElement","id","placeholder","multiple","isFilter","query","setQuery","setSelected","reqData","useEffect","length","makeRequest","filter","includes","page","q","onInputChange","FormGroup","FormLabel","onSearch","console","log","filterBy","labelKey","maxResults","minLength","options","title","concat","emptyLabel","searchText","selectedOptions","opt","renderMenuItemChildren","option","FormControl","FileElement","onDrop","acceptedFiles","getRootProps","getInputProps","position","styles","fileDrop","fileDrop__svg","xmlns","x","y","width","height","fileDrop__rect","fileDrop__rect_2","fileDrop__label","module","exports","selectAllHonorsState","honors","all","selectAllHonorsSort","sort","selectAllHonorsPagination","currentPage","total","allHonorsStart","ALL_HONORS_START","allHonorsError","ALL_HONORS_ERROR","allHonorsSuccess","ranksResponse","ALL_HONORS_SUCCESS","payload","allHonorsDelete","ALL_HONORS_DELETE","client","create","baseURL","process","honorsApi","getHonors","filters","objToParams","get","getHonor","editHonor","vals","put","deleteHonor","delete","addHonor","post","importHonors","formData","FormData","append","thunkAllHonors","dispatch","getState","form","getFormValues","pagination","reduxForm","handleSubmit","onSubmit","Translation","t","Row","Field","component","Button","HonorItem","honor","isDeleting","del","fullName","datePresentation","UserCan","Roles","VIEWER","to","MODERATOR","Spinner","animation","selectDeleteHonors","deleteHonorStart","DELETE_HONOR_START","deleteHonorError","DELETE_HONOR_ERROR","deleteHonorSuccess","DELETE_HONOR_SUCCESS","thunkDeleteHonor","toast","success","deleting","changeSort","field","ALL_HONORS_CHANGE_SORT","allHonorsChangeSort","load","deleteItem","useTranslation","Table","striped","bordered","hover","minWidth","findSortRule","direction","colSpan","Loader","what","findIndex","paginator","changePage","document","Card","Body","Footer","selectEditHonorState","edit","selectEditHonor","thunkEditHonorLoad","EDIT_HONOR_LOAD_START","publication","EDIT_HONOR_LOAD_SUCCESS","EDIT_HONOR_LOAD_ERROR","thunkEditHonor","startSubmit","stopSubmit","_error","errors","initialize","validate","editState","submitting","isSubmitting","loadHonor","send","submit","IsUserRoleMore","match","EditHonorForm","disabled","thunkAddHonor","reset","add","AddHonorForm","HonorInfo","Trans","i18nKey","authors","selectHonorSingleState","single","thunkSingleHonor","HONOR_SINGLE_START","HONOR_SINGLE_SUCCESS","HONOR_SINGLE_ERROR","thunkImportHonor","isSubmit","ImportHonorsForm","href","target","path","exact","AllHonorsPage","AddHonorPage","ImportHonorPage","EditHonorPage","SingleHonorPage","NotFoundPage"],"mappings":"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","file":"static/js/11.92a7728a.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {WrappedFieldProps} from 'redux-form';\r\nimport {FormControl, FormGroup, FormLabel} from 'react-bootstrap';\r\n\r\n\r\ntype IInputElementProps = WrappedFieldProps & HTMLInputElement & {label: string, onlyInValid: boolean};\r\nconst InputElement: React.FC<IInputElementProps> = ({onlyInValid = true, ...props}) => {\r\n\t// useEffect(() => {\r\n\t// \tif(!props.meta.touched && props.defaultValue)\r\n\t// \t\tprops.input.onChange(props.defaultValue as any, props.name);\r\n\t// }, []);\r\n\r\n\treturn (\r\n\t\t<FormGroup controlId={props.name}>\r\n\t\t\t{\r\n\t\t\t\tprops.label &&\r\n\t\t\t\t<FormLabel column={true}>{props.label}</FormLabel>\r\n\t\t\t}\r\n\r\n\t\t<FormControl\r\n\t\t\ttype={props.type}\r\n\t\t\tname={props.name}\r\n\t\t\tvalue={props.input.value}\r\n\t\t\tclassName={props.className}\r\n\t\t\tonChange={props.input.onChange}\r\n\t\t\tonFocus={props.input.onFocus}\r\n\t\t\tonBlur={props.input.onBlur}\r\n\t\t\tisValid={!onlyInValid && props.meta.touched ? props.meta.valid : undefined}\r\n\t\t\tisInvalid={props.meta.touched ? !props.meta.valid : undefined}\r\n\t\t/>\r\n\r\n\t\t\t{\r\n\t\t\t\tprops.meta.error &&\r\n\t\t\t\t<FormControl.Feedback type=\"invalid\" style={{display: 'block'}}>\r\n\t\t\t\t\t{props.meta.touched && props.meta.error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t\t}\r\n\t\t</FormGroup>\r\n\t);\r\n};\r\n\r\nexport default InputElement;\r\n","import React from 'react';\r\nimport {Button} from 'react-bootstrap';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\n\r\nconst BackButton: React.FC<{}> = () => {\r\n\tconst history = useHistory();\r\n\r\n\treturn (\r\n\t\t<Button variant=\"light\" onClick={() => history.goBack()}>Назад</Button>\r\n\t);\r\n};\r\n\r\nexport default BackButton;\r\n","import React from 'react';\r\n\r\n\r\ntype IErrorProps = {\r\n\terror?: string\r\n};\r\n\r\nconst ErrorElement: React.FC<IErrorProps> = ({error}) => (\r\n\t<div>{error || 'Произошла ошибка'}</div>\r\n);\r\n\r\nexport default ErrorElement;\r\n","const required = (str: string) => {\r\n\treturn str ? null : 'Поле обязательно для заполнения'\r\n};\r\n\r\nexport default required;\r\n","import React from 'react';\r\nimport cn from 'classnames';\r\n\r\n\r\ntype ISortItemProps = {\r\n\tstate: -1 | 1 | undefined,\r\n\tchange: (param: string) => void,\r\n\tparam: string\r\n};\r\n\r\nconst SortItem: React.FC<ISortItemProps> = ({state, change, param}) => (\r\n\t<i className={cn(\"fa cur pull-right\", {\r\n\t\t[\"fa-sort-amount-asc\"]: state == 1 || state == undefined,\r\n\t\t[\"fa-sort-amount-desc\"]: state == -1,\r\n\t\t[\"opacity-5\"]: state == undefined,\r\n\t})}\r\n\t   onClick={() => change(param)}\r\n\t/>\r\n);\r\n\r\nexport default SortItem;\r\n","import React from 'react';\r\nimport {Pagination} from 'react-bootstrap';\r\n\r\n\r\ntype IPaginatorProps = {\r\n\ttotalItems: number,\r\n\tcurPage: number,\r\n\tsize?: number,\r\n\tpageSize: number,\r\n\tsetCur: (page: number) => void\r\n};\r\n\r\nconst Paginator: React.FC<IPaginatorProps> = ({totalItems, curPage, setCur, pageSize, size = 5}) => {\r\n\tlet hasPrev = curPage > size,\r\n\t\ttotalPages = Math.ceil(totalItems/pageSize),\r\n\t\thasNext = totalPages > (Math.floor((curPage - 1) / size) + 1) * size,\r\n\t\tcurPaginator = Math.floor((curPage - 1) / size);\r\n\r\n\tif (totalPages <= 1)\r\n\t\treturn null;\r\n\r\n\treturn (\r\n\t\t<Pagination>\r\n\t\t\t{\r\n\t\t\t\thasPrev &&\r\n\t\t\t\t\t<Pagination.Item onClick={() => setCur((curPaginator - 1) * size + 1)}>\r\n\t\t\t\t\t\t&lt;\r\n\t\t\t\t\t</Pagination.Item>\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\tnew Array(size).fill('').map((val, index) => {\r\n\t\t\t\t\tconst curItemNumber = curPaginator * size + index + 1;\r\n\r\n\t\t\t\t\tif(curItemNumber > totalPages)\r\n\t\t\t\t\t\treturn null;\r\n\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Pagination.Item\r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t\tactive={curPage == curItemNumber}\r\n\t\t\t\t\t\t\tonClick={() => setCur(curItemNumber)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{curItemNumber}\r\n\t\t\t\t\t\t</Pagination.Item>\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\t{\r\n\t\t\t\thasNext &&\r\n\t\t\t\t\t<Pagination.Item onClick={() => setCur((curPaginator + 1) * size + 1)}>\r\n\t\t\t\t\t\t&gt;\r\n\t\t\t\t\t</Pagination.Item>}\r\n\t\t</Pagination>\r\n\t);\r\n};\r\n\r\nexport default Paginator;\r\n","import React from 'react';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\n\r\nimport {RootState} from '../redux';\r\nimport {selectMeInfo} from '../redux/me/selectors';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tuser: selectMeInfo(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps);\r\n\r\ntype IUserCanProps = {role: number, children: any} & ConnectedProps<typeof connected>;\r\nconst UserCan: React.FC<IUserCanProps> = ({role, children, user}) => {\r\n\treturn user.role <= role ? <>{children}</> : null;\r\n};\r\n\r\nexport default connected(UserCan);\r\n","import React from 'react';\r\nimport {WrappedFieldProps} from 'redux-form';\r\nimport DatePicker, {ReactDatePickerProps} from 'react-datepicker';\r\nimport {FormGroup, FormLabel, FormControl} from 'react-bootstrap';\r\nimport {instanceOf} from 'prop-types';\r\n\r\n\r\ntype IDateElementProps = WrappedFieldProps &\r\n\tHTMLInputElement & {label: string} & ReactDatePickerProps;\r\n\r\nconst DateElement: React.FC<IDateElementProps> = ({meta, input, name, label, className}) => (\r\n\t<FormGroup>\r\n\t\t{\r\n\t\t\tlabel &&\r\n\t\t\t\t<FormLabel column={true}>{label}</FormLabel>\r\n\t\t}\r\n\r\n\t\t<DatePicker\r\n\t\t\tselected={input.value}\r\n\t\t\tclassName={className}\r\n\t\t\tdateFormat=\"dd.MM.yyyy\"\r\n\t\t\tshowMonthDropdown={true}\r\n\t\t\tshowYearDropdown={true}\r\n\t\t\tonChange={(d: any) => input.onChange(d, name)}\r\n\t\t/>\r\n\r\n\t\t{\r\n\t\t\tmeta.touched && meta.error &&\r\n\t\t\t\t<FormControl.Feedback style={{display: 'block'}}>\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t}\r\n\t</FormGroup>\r\n);\r\n\r\nexport default DateElement;\r\n","export default (data: Object | Array<any>, name: string): Object => {\r\n\tlet sortRules: any = {};\r\n\r\n\tif(Array.isArray(data)){\r\n\t\tdata.forEach((item, index) => {\r\n\t\t\tlet key = `${name}[${index}]`;\r\n\t\t\tsortRules[key] = item;\r\n\t\t});\r\n\r\n\t\treturn sortRules;\r\n\t}\r\n\r\n\telse if(data instanceof Object){\r\n\t\tfor(let objKey in data){\r\n\t\t\tlet key = `${name}[${objKey}]`;\r\n\t\t\tsortRules[key] = (data as any)[objKey];\r\n\t\t}\r\n\r\n\t\treturn sortRules;\r\n\t}\r\n};\r\n","import axios, {Method} from 'axios';\r\nimport {useCallback, useState} from 'react';\r\n\r\n\r\ntype IHttpHandlerOptions = {\r\n\turl: string,\r\n\tmethod?: Method,\r\n\theaders?: Object,\r\n\tdata?: Object\r\n}\r\n\r\nconst useHttp = <T>() => {\r\n\tconst [isLoading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState<string>(null);\r\n\tconst [data, setData] = useState<T>(null);\r\n\r\n\tconst handler = useCallback(async ({url, headers, method, data}: IHttpHandlerOptions) => {\r\n\t\tsetLoading(true);\r\n\r\n\t\ttry {\r\n\t\t\tawait new Promise(res => {\r\n\t\t\t\tsetTimeout(res, 3000);\r\n\t\t\t});\r\n\r\n\t\t\tconst resp = await axios.request<T>({\r\n\t\t\t\tmethod, url, params: data, headers: {\r\n\t\t\t\t\t...headers,\r\n\t\t\t\t\tAuthorization: `Bearer ${localStorage.getItem('token')}`,\r\n\t\t\t\t\t'Access-Control-Allow-Origin': '*'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tsetData(resp.data);\r\n\t\t} catch (e) {\r\n\t\t\tsetError(e.response?.data.message || e.message);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t}, [isLoading, error, data]);\r\n\r\n\treturn {isLoading, error, data, request: handler};\r\n};\r\n\r\nexport default useHttp;\r\n","const debounce = (fn: Function, delay: number): any => {\r\n\tlet timer: any = null;\r\n\r\n\treturn (...args: any[]) => {\r\n\t\tif(timer)\r\n\t\t\tclearTimeout(timer);\r\n\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\tfn(...args);\r\n\t\t}, delay);\r\n\t};\r\n};\r\n\r\nexport default debounce;\r\n","import React, {useEffect, useState} from 'react';\r\nimport {AsyncTypeahead} from 'react-bootstrap-typeahead';\r\nimport {WrappedFieldProps} from 'redux-form';\r\nimport {FormControl, FormGroup, FormLabel} from 'react-bootstrap';\r\n\r\nimport useHttp from '../../utils/hooks/useHttp';\r\nimport {IGeneralPaginationResponse} from '../../interfaces/responses/IGeneralPaginationResponse';\r\nimport debounce from '../../utils/helpers/debounce';\r\n\r\n\r\ntype IDataListOwnProps = {\r\n\turl: string,\r\n\tid: string,\r\n\tplaceholder?: string,\r\n\tsize?: number,\r\n\tmultiple?: boolean,\r\n\tisFilter?: boolean\r\n};\r\n\r\ntype IOption = {\r\n\tid: number,\r\n\ttitle: string\r\n};\r\n\r\ntype IDataListElementProps = WrappedFieldProps & IDataListOwnProps;\r\nconst DataListElement: React.FC<IDataListElementProps> = (props) => {\r\n\tconst {id, placeholder, url, size = 5, multiple, isFilter, input: {onChange, name, value}} = props;\r\n\r\n\t//hooks\r\n\tconst [query, setQuery] = useState(null);\r\n\tconst [selected, setSelected] = useState<IOption[]>([]);\r\n\tconst {request, error, isLoading, data: reqData} = useHttp<IGeneralPaginationResponse<IOption>>();\r\n\r\n\t//hook query changes\r\n\tuseEffect(() => {\r\n\t\tif (query != null && query.length >= 1)\r\n\t\t\tmakeRequest();\r\n\t}, [query]);\r\n\r\n\t//hook for selected\r\n\tuseEffect(() => {\r\n\t\tif(!multiple)\r\n\t\t\tsetSelected(value ? selected.filter(({id}) => id == value) : []);\r\n\t\telse\r\n\t\t\tsetSelected(value ? selected.filter(({id}) => value.includes(id)) : []);\r\n\t}, [value]);\r\n\r\n\t//wrapper for making http request\r\n\tconst makeRequest = async (page = 1) => {\r\n\t\tconst data = {q: query, page, pageSize: size};\r\n\t\tawait request({url, data});\r\n\t};\r\n\r\n\t//input change handler\r\n\tconst onInputChange = debounce(async (query: string) => {\r\n\t\t//change cur query\r\n\t\tsetQuery(query);\r\n\t}, 500);\r\n\r\n\tconst onSelect = (selectedOptions: IOption[]) => {\r\n\t\tsetSelected(selectedOptions);\r\n\r\n\t\tif(!multiple) {\r\n\t\t\tif (!selectedOptions.length)\r\n\t\t\t\tonChange(null, name);\r\n\t\t\telse\r\n\t\t\t\tonChange(selectedOptions[0].id as any, name);\r\n\t\t}\r\n\t\telse\r\n\t\t\tonChange(selectedOptions.map((opt) => opt.id) as any, name);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<FormGroup controlId={id}>\r\n\t\t\t{\r\n\t\t\t\tplaceholder &&\r\n\t\t\t\t\t<FormLabel column={true}>{placeholder}</FormLabel>\r\n\t\t\t}\r\n\r\n\t\t\t<AsyncTypeahead\r\n\t\t\t\tonInputChange={onInputChange}\r\n\t\t\t\tonSearch={() => {console.log('Search')}}\r\n\t\t\t\tfilterBy={['title']}\r\n\t\t\t\tlabelKey=\"title\"\r\n\r\n\t\t\t\tid={name}\r\n\t\t\t\tmaxResults={size}\r\n\t\t\t\tminLength={1}\r\n\t\t\t\toptions={(isFilter ? [{id: -1, title: 'All'}] : []).concat(reqData?.data ? reqData.data : [])}\r\n\t\t\t\tisLoading={isLoading}\r\n\t\t\t\temptyLabel=\"No items\"\r\n\t\t\t\tsearchText=\"Search...\"\r\n\t\t\t\tisInvalid={!!error}\r\n\t\t\t\tonChange={onSelect}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\tmultiple={multiple}\r\n\r\n\t\t\t\trenderMenuItemChildren={(option: IOption) => (\r\n\t\t\t\t\t<div key={option.id}>\r\n\t\t\t\t\t\t{option.title}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\r\n\t\t\t{\r\n\t\t\t\terror &&\r\n\t\t\t\t<FormControl.Feedback type=\"invalid\" style={{display: 'block'}}>\r\n\t\t\t\t\t{props.meta.touched && error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t\t}\r\n\t\t</FormGroup>\r\n\t);\r\n};\r\n\r\nexport default DataListElement;\r\n","import React, {useState} from 'react';\r\nimport Dropzone from 'react-dropzone';\r\nimport {WrappedFieldProps} from 'redux-form';\r\n\r\nimport styles from './styles.module.scss';\r\nimport {FormControl} from 'react-bootstrap';\r\n\r\n\r\ntype IFileElementProps = WrappedFieldProps & {label: string, name: string};\r\nconst FileElement: React.FC<IFileElementProps> = ({name, label, input, meta}) => {\r\n\t\tconst handler = (acceptedFiles: File[]) => {\r\n\t\t\tinput.onChange(acceptedFiles[0] as any, name);\r\n\t\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dropzone onDrop={handler}>\r\n\t\t\t\t{\r\n\t\t\t\t\t({getRootProps, getInputProps}) => (\r\n\t\t\t\t\t\t<section style={{position: 'relative'}}>\r\n\t\t\t\t\t\t\t<div {...getRootProps()} className={styles.fileDrop}>\r\n\t\t\t\t\t\t\t\t<input {...getInputProps()}/>\r\n\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName={styles.fileDrop__svg}\r\n\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\tx=\"0\"\r\n\t\t\t\t\t\t\t\t\t\ty=\"0\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={styles.fileDrop__rect}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<rect\r\n\t\t\t\t\t\t\t\t\t\tx=\"0\"\r\n\t\t\t\t\t\t\t\t\t\ty=\"0\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\t\t\t\t\t\tclassName={`${styles.fileDrop__rect} ${styles.fileDrop__rect_2}`}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\r\n\t\t\t\t\t\t\t\t<p className={styles.fileDrop__label}>\r\n\t\t\t\t\t\t\t\t\t<div>{label}</div>\r\n\t\t\t\t\t\t\t\t\t<div>{input.value?.name}</div>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</Dropzone>\r\n\r\n\t\t\t{\r\n\t\t\t\tmeta.touched && meta.error &&\r\n\t\t\t\t<FormControl.Feedback style={{display: 'block'}}>\r\n\t\t\t\t\t{meta.error}\r\n\t\t\t\t</FormControl.Feedback>\r\n\t\t\t}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FileElement;\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"fileDrop\":\"styles_fileDrop__3vLx4\",\"fileDrop__label\":\"styles_fileDrop__label__328fS\",\"fileDrop__svg\":\"styles_fileDrop__svg__1fjtk\",\"fileDrop__rect\":\"styles_fileDrop__rect__3KjTF\",\"fileDrop__rect_2\":\"styles_fileDrop__rect_2__3UJkx\"};","import {RootState} from '../../';\r\n\r\n\r\nexport const selectAllHonorsState = (state: RootState) => state.honors.all;\r\nexport const selectAllHonors = (state: RootState) => selectAllHonorsState(state).honors;\r\nexport const selectAllHonorsSort = (state: RootState) => selectAllHonorsState(state).sort;\r\n\r\nexport const selectAllHonorsPagination = (state: RootState) => ({\r\n\tpageSize: selectAllHonorsState(state).pageSize,\r\n\tcurPage: selectAllHonorsState(state).currentPage,\r\n\ttotalItems: selectAllHonorsState(state).total\r\n});\r\n","import {\r\n\tALL_HONORS_CHANGE_SORT,\r\n\tALL_HONORS_ERROR,\r\n\tALL_HONORS_START,\r\n\tALL_HONORS_SUCCESS,\r\n\tALL_HONORS_DELETE\r\n} from './types';\r\n\r\nimport {IGeneralPaginationResponse} from '../../../interfaces/responses/IGeneralPaginationResponse';\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\n\r\n\r\ntype IResponse = IGeneralPaginationResponse<IHonor>;\r\n\r\nexport const allHonorsStart = () => <const>({\r\n\ttype: ALL_HONORS_START\r\n});\r\n\r\nexport const allHonorsError = (error: string) => <const>({\r\n\ttype: ALL_HONORS_ERROR,\r\n\terror\r\n});\r\n\r\nexport const allHonorsSuccess = (ranksResponse: IResponse) => <const>({\r\n\ttype: ALL_HONORS_SUCCESS,\r\n\tpayload: ranksResponse\r\n});\r\n\r\nexport const allHonorsChangeSort = (field: string) => <const>({\r\n\ttype: ALL_HONORS_CHANGE_SORT,\r\n\tpayload: field\r\n});\r\n\r\nexport const allHonorsDelete = (id: number) => <const>({\r\n\ttype: ALL_HONORS_DELETE,\r\n\tpayload: id\r\n});\r\n","import axios from 'axios';\r\n\r\nimport {ISort} from '../../../interfaces/ISort';\r\nimport {IGeneralPaginationResponse} from '../../../interfaces/responses/IGeneralPaginationResponse';\r\n\r\nimport objToParams from '../../helpers/objToParams';\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\nimport {IHonorsAddData} from '../../../pages/Honors/add/AddHonorForm';\r\nimport {IHonorsImportData} from '../../../pages/Honors/import/ImportHonorsForm';\r\nimport {IHonorsEditData} from '../../../pages/Honors/edit/EditHonorForm';\r\n\r\n\r\nconst client = axios.create({\r\n\tbaseURL: `${process.env.REACT_APP_SERVER_URL}/honors`,\r\n\theaders: {\r\n\t\t'Access-Control-Allow-Origin': '*',\r\n\t\tAuthorization: `Bearer ${localStorage.getItem('token')}`\r\n\t}\r\n});\r\n\r\nconst honorsApi = {\r\n\tasync getHonors(filters: any = {}, sort: ISort[] = [], page = 1, pageSize = 5) {\r\n\t\tconst sortRules = objToParams(sort, 'sort');\r\n\r\n\t\treturn await client.get<IGeneralPaginationResponse<IHonor>>('/', {\r\n\t\t\tparams: {...filters, ...sortRules, page, pageSize}\r\n\t\t});\r\n\t},\r\n\r\n\tasync getHonor(id: number) {\r\n\t\treturn await client.get<{data: IHonor}>(`/${id}`);\r\n\t},\r\n\r\n\tasync editHonor(id: number, vals: IHonorsEditData) {\r\n\t\treturn await client.put<IHonor>(`/${id}`, vals);\r\n\t},\r\n\r\n\tasync deleteHonor(id: number) {\r\n\t\treturn await client.delete<{ message: string }>(`/${id}`);\r\n\t},\r\n\r\n\tasync addHonor(vals: IHonorsAddData) {\r\n\t\treturn await client.post('/add', vals);\r\n\t},\r\n\r\n\tasync importHonors(vals: IHonorsImportData){\r\n\t\tlet formData = new FormData();\r\n\r\n\t\tfor(let key in vals){\r\n\t\t\tformData.append(key, (vals as any)[key]);\r\n\t\t}\r\n\r\n\t\treturn await client.post('/import', formData);\r\n\t}\r\n};\r\n\r\nexport default honorsApi;\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {getFormValues} from 'redux-form';\r\n\r\nimport {RootState} from '../../';\r\nimport {IAllHonorsActions} from './reducer';\r\n\r\nimport {\r\n\tallHonorsError,\r\n\tallHonorsStart,\r\n\tallHonorsSuccess\r\n} from './actions';\r\nimport {selectAllHonorsPagination, selectAllHonorsSort} from './selectors';\r\nimport honorsApi from '../../../utils/api/models/honorsApi';\r\n\r\n\r\nexport type IAllHonorsThunkAction = ThunkAction<void, RootState, unknown, IAllHonorsActions>;\r\n\r\nconst thunkAllHonors = (page: number = 1): IAllHonorsThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, IAllHonorsActions>, getState) => {\r\n\t\tdispatch(allHonorsStart());\r\n\r\n\t\ttry{\r\n\t\t\tconst form = getFormValues('honorsFilterForm'),\r\n\t\t\t\tsort = selectAllHonorsSort(getState()),\r\n\t\t\t\tpagination = selectAllHonorsPagination(getState());\r\n\r\n\t\t\tconst resp = await honorsApi.getHonors(form(getState()), sort, page, pagination.pageSize);\r\n\t\t\tdispatch(allHonorsSuccess(resp.data));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(allHonorsError(e.message));\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkAllHonors;\r\n","import React from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\nimport {Button, Row} from 'react-bootstrap';\r\n\r\nimport InputElement from '../../../common/formElements/InputElement';\r\nimport DataListElement from '../../../common/formElements/DataListElement';\r\nimport DateElement from '../../../common/formElements/DateElement';\r\nimport SelectElement from '../../../common/formElements/SelectElement';\r\n\r\n\r\nexport type IHonorsFilterData = {\r\n\tfilterUser: number,\r\n\tfilterTitle: string,\r\n\tfilterFrom: string,\r\n\tfilterTo: string,\r\n\tfilterType: number\r\n};\r\n\r\ntype IHonorsFilterFormProps = InjectedFormProps<IHonorsFilterData>;\r\nconst HonorsFilterForm: React.FC<IHonorsFilterFormProps> = ({handleSubmit}) => (\r\n\t<form onSubmit={handleSubmit} className=\"w-100 center flex-column my-3\">\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={DataListElement}\r\n\t\t\t\t\t\tname=\"filterUser\"\r\n\t\t\t\t\t\tid=\"filterUser\"\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tplaceholder={t('honors.all.filterUser')}\r\n\t\t\t\t\t\turl={`${process.env.REACT_APP_SERVER_URL}/search/users`}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"filterTitle\"\r\n\t\t\t\t\t\tclassName=\"w-100 ml-1\"\r\n\t\t\t\t\t\tlabel={t('honors.all.filterName')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\tname=\"filterFrom\"\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tlabel={t('honors.all.filterFrom')}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\tname=\"filterTo\"\r\n\t\t\t\t\t\tclassName=\"w-100\"\r\n\t\t\t\t\t\tlabel={t('honors.all.filterTo')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Row>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button variant=\"info\" type=\"submit\">\r\n\t\t\t\t\t\t{t('common.search')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\t</form>\r\n);\r\n\r\nexport default reduxForm<IHonorsFilterData>({\r\n\tform: 'honorsFilterForm'\r\n})(HonorsFilterForm);\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {Spinner} from 'react-bootstrap';\r\n\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport UserCan from '../../../common/UserCan';\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\n\r\n\r\ntype IHonorItemProps = {\r\n\thonor: IHonor,\r\n\tisDeleting: boolean,\r\n\tdel: (id: number) => void\r\n};\r\n\r\nconst HonorItem: React.FC<IHonorItemProps> = ({honor, isDeleting, del}) => (\r\n\t<tr>\r\n\t\t<th>{honor.id}</th>\r\n\t\t<th>{honor.user.fullName}</th>\r\n\t\t<th>{honor.title}</th>\r\n\t\t<th>{honor.datePresentation}</th>\r\n\t\t<th>\r\n\t\t\t<UserCan role={Roles.VIEWER}>\r\n\t\t\t\t<Link to={`/honors/${honor.id}`}>\r\n\t\t\t\t\t<i className=\"fa fa-eye\"/>\r\n\t\t\t\t</Link>\r\n\t\t\t</UserCan>\r\n\r\n\t\t\t<UserCan role={Roles.MODERATOR}>\r\n\t\t\t\t<Link to={`/honors/${honor.id}/edit`}>\r\n\t\t\t\t\t<i className=\"fa fa-pencil\"/>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tisDeleting ?\r\n\t\t\t\t\t\t<Link to=\"#\">\r\n\t\t\t\t\t\t\t<i className=\"fa fa-close\" onClick={() => del(honor.id)}/>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<Spinner animation=\"border\" size=\"sm\"/>\r\n\t\t\t\t}\r\n\t\t\t</UserCan>\r\n\t\t</th>\r\n\t</tr>\r\n);\r\n\r\nexport default HonorItem;\r\n","import {RootState} from '../../';\r\n\r\n\r\nexport const selectDeleteHonors = (state: RootState) => state.honors.del;\r\n","import {\r\n\tDELETE_HONOR_ERROR,\r\n\tDELETE_HONOR_START,\r\n\tDELETE_HONOR_SUCCESS\r\n} from './types';\r\n\r\n\r\nexport const deleteHonorStart = (id: number) => <const>({\r\n\ttype: DELETE_HONOR_START,\r\n\tpayload: id\r\n});\r\n\r\nexport const deleteHonorError = (id: number, error: string) => <const>({\r\n\ttype: DELETE_HONOR_ERROR,\r\n\terror,\r\n\tpayload: id\r\n});\r\n\r\nexport const deleteHonorSuccess = (id: number) => <const>({\r\n\ttype: DELETE_HONOR_SUCCESS,\r\n\tpayload: id\r\n});\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../index';\r\nimport {IDeleteHonorActions} from './reducer';\r\n\r\nimport {deleteHonorError, deleteHonorStart, deleteHonorSuccess} from './actions';\r\nimport {allHonorsDelete} from '../all/actions';\r\nimport honorsApi from '../../../utils/api/models/honorsApi';\r\n\r\n\r\ntype IActions = IDeleteHonorActions | ReturnType<typeof allHonorsDelete>;\r\nexport type IHonorEditThunkAction = ThunkAction<void, RootState, unknown, IActions>;\r\n\r\nconst thunkDeleteHonor = (id: number): IHonorEditThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, IActions>) => {\r\n\t\tdispatch(deleteHonorStart(id));\r\n\r\n\t\ttry{\r\n\t\t\tawait honorsApi.deleteHonor(id);\r\n\r\n\t\t\tdispatch(deleteHonorSuccess(id));\r\n\t\t\tdispatch(allHonorsDelete(id));\r\n\t\t\ttoast.success(`Награда с id ${id} удалена`);\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(deleteHonorError(id, e.response?.data.message || e.message));\r\n\t\t\ttoast.error(`Ошибка: ${e.response?.data.message || e.message}`);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkDeleteHonor;\r\n","import React, {useEffect} from 'react';\r\nimport {Table} from 'react-bootstrap';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\nimport {IPublication} from '../../../interfaces/models/IPublication';\r\n\r\nimport SortItem from '../../../common/SortItem';\r\nimport Loader from '../../../common/Loader/Loader';\r\nimport ErrorElement from '../../../common/ErrorElement';\r\nimport findSortRule from '../../../utils/helpers/findSortRule';\r\nimport HonorItem from './HonorItem';\r\nimport {selectAllHonorsState} from '../../../redux/honors/all/selectors';\r\nimport {selectDeleteHonors} from '../../../redux/honors/delete/selectors';\r\nimport {allHonorsChangeSort} from '../../../redux/honors/all/actions';\r\nimport thunkAllHonors from '../../../redux/honors/all/thunks';\r\nimport thunkDeleteHonor from '../../../redux/honors/delete/thunks';\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\t...selectAllHonorsState(state),\r\n\tdeleting: selectDeleteHonors(state)\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: any) => ({\r\n\tchangeSort(field: string) {\r\n\t\tdispatch(allHonorsChangeSort(field));\r\n\t\tdispatch(thunkAllHonors(1));\r\n\t},\r\n\tload(page = 1) {\r\n\t\tdispatch(thunkAllHonors(page));\r\n\t},\r\n\tdeleteItem(id: number) {\r\n\t\tdispatch(thunkDeleteHonor(id));\r\n\t}\r\n});\r\n\r\nconst connected = connect(mapStateToProps, mapDispatchToProps);\r\n\r\ntype IHonorsTableProps = ConnectedProps<typeof connected>;\r\nconst HonorsTable: React.FC<IHonorsTableProps> = (props) => {\r\n\tuseEffect(() => {\r\n\t\tif (!props.isLoading && !props.honors.length)\r\n\t\t\tprops.load();\r\n\t}, []);\r\n\r\n\tconst {t} = useTranslation();\r\n\r\n\treturn (\r\n\t\t<div className=\"table-wrapper\">\r\n\t\t\t<Table striped bordered hover style={{minWidth: \"600px\"}}>\r\n\t\t\t\t<thead>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<span className=\"pull-left\">ID</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'ID')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"ID\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t<span className=\"pull-left\">\r\n\t\t\t\t\t\t{t('honors.all.user')}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'user')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"user\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t\t<span className=\"pull-left\">\r\n\t\t\t\t\t\t\t{t('honors.all.title')}\r\n\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'title')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"title\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>\r\n\t\t\t\t\t<span className=\"pull-left\">\r\n\t\t\t\t\t\t{t('honors.all.date')}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t<SortItem\r\n\t\t\t\t\t\t\tstate={findSortRule(props.sort, 'datePresentation')?.direction}\r\n\t\t\t\t\t\t\tchange={props.changeSort}\r\n\t\t\t\t\t\t\tparam=\"datePresentation\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</th>\r\n\r\n\t\t\t\t\t<th>{t('common.actions')}</th>\r\n\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\t\t\t\t<tbody>\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.isLoading &&\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<th colSpan={6} className=\"text-center\">\r\n\t\t\t\t\t\t\t<Loader/>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tprops.error &&\r\n\t\t\t\t\t<tr className=\"text-center text-danger\">\r\n\t\t\t\t\t\t<th colSpan={6} className=\"text-center\">\r\n\t\t\t\t\t\t\t<ErrorElement error={props.error}/>\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t!props.isLoading && !props.error && !props.honors.length &&\r\n\t\t\t\t\t<tr className=\"font-weight-bold text-center\">\r\n\t\t\t\t\t\t<th colSpan={6} className=\"text-center\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tt('common.noItems', {\r\n\t\t\t\t\t\t\t\t\twhat: t('honors.all.noForm')\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</th>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t}\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\t!props.isLoading && !props.error &&\r\n\t\t\t\t\tprops.honors.map((honor: IHonor) => (\r\n\t\t\t\t\t\t<HonorItem\r\n\t\t\t\t\t\t\tkey={honor.id}\r\n\t\t\t\t\t\t\thonor={honor}\r\n\t\t\t\t\t\t\tisDeleting={props.deleting.findIndex((id: number) => id == honor.id) == -1}\r\n\t\t\t\t\t\t\tdel={props.deleteItem}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t\t</tbody>\r\n\t\t\t</Table>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default connected(HonorsTable);\r\n","import React, {useEffect} from 'react';\r\nimport {Button, Card, Row} from 'react-bootstrap';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\n\r\nimport BackButton from '../../../common/BackButton';\r\nimport Paginator from '../../../common/Paginator';\r\nimport UserCan from '../../../common/UserCan';\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport {selectAllHonorsPagination} from '../../../redux/honors/all/selectors';\r\nimport thunkAllHonors from '../../../redux/honors/all/thunks';\r\nimport HonorsFilterForm from './HonorsFilterForm';\r\nimport HonorsTable from './HonorsTable';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tpaginator: selectAllHonorsPagination(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {changePage: thunkAllHonors});\r\n\r\ntype IAllHonorsPageProps = ConnectedProps<typeof connected>;\r\nconst AllHonorsPage: React.FC<IAllHonorsPageProps> = ({changePage, paginator}) => {\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = t('honors.all.pageTitle');\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('honors.name')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<div className=\"model__filter-form\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<UserCan role={Roles.MODERATOR}>\r\n\t\t\t\t\t\t\t\t<Link to=\"/honors/add\">\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"success\">\r\n\t\t\t\t\t\t\t\t\t\t{t('common.add')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</UserCan>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<UserCan role={Roles.MODERATOR}>\r\n\t\t\t\t\t\t\t\t<Link to=\"/honors/import\">\r\n\t\t\t\t\t\t\t\t\t<Button variant=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t{t('common.import')}\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</UserCan>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<HonorsFilterForm onSubmit={() => changePage(1)}/>\r\n\r\n\t\t\t\t\t<div className=\"d-flex justify-content-center w-100\">\r\n\t\t\t\t\t\t<HonorsTable/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"d-flex my-3 justify-content-end w-100\">\r\n\t\t\t\t\t\t<Paginator {...paginator} setCur={changePage}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default connected(AllHonorsPage);\r\n","import {RootState} from '../../index';\r\n\r\n\r\nexport const selectEditHonorState = (state: RootState) => state.honors.edit;\r\nexport const selectEditHonor = (state: RootState) => selectEditHonorState(state).honor;\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\n\r\nimport {IEditHonorActions} from '../reducer';\r\nimport {RootState} from '../../../';\r\n\r\nimport {editHonorLoadStart, editHonorLoadError, editHonorLoadSuccess} from '../actions';\r\nimport honorsApi from '../../../../utils/api/models/honorsApi';\r\n\r\n\r\nexport type IEditHonorLoadThunkAction = ThunkAction<void, RootState, unknown, IEditHonorActions>;\r\n\r\nconst thunkEditHonorLoad = (id: number): IEditHonorLoadThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, IEditHonorActions>) => {\r\n\t\tdispatch(editHonorLoadStart());\r\n\r\n\t\ttry{\r\n\t\t\tconst resp = await honorsApi.getHonor(id);\r\n\t\t\tdispatch(editHonorLoadSuccess(resp.data.data));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(editHonorLoadError(e.response?.data.message || e.message));\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkEditHonorLoad;\r\n","import {\r\n\tEDIT_HONOR_LOAD_ERROR,\r\n\tEDIT_HONOR_LOAD_START,\r\n\tEDIT_HONOR_LOAD_SUCCESS\r\n} from './types';\r\n\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\n\r\n\r\nexport const editHonorLoadStart = () => <const>({\r\n\ttype: EDIT_HONOR_LOAD_START\r\n});\r\n\r\nexport const editHonorLoadError = (error: string) => <const>({\r\n\ttype: EDIT_HONOR_LOAD_ERROR,\r\n\terror\r\n});\r\n\r\nexport const editHonorLoadSuccess = (publication: IHonor) => <const>({\r\n\ttype: EDIT_HONOR_LOAD_SUCCESS,\r\n\tpayload: publication\r\n});\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {startSubmit, stopSubmit} from 'redux-form';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../../index';\r\nimport honorsApi from '../../../../utils/api/models/honorsApi';\r\n\r\n\r\nexport type IHonorEditThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkEditHonor = (id: number, vals: any): IHonorEditThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(startSubmit('publicationsEditForm'));\r\n\r\n\t\ttry{\r\n\t\t\tawait honorsApi.editHonor(id, vals);\r\n\r\n\t\t\tdispatch(stopSubmit('honorsEditForm'));\r\n\t\t\ttoast.success('Награда отредактирована');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(stopSubmit('honorsEditForm', {\r\n\t\t\t\t_error: e.response?.data.message || e.message,\r\n\t\t\t\t...e.response?.data.errors\r\n\t\t\t}));\r\n\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkEditHonor;\r\n","import React, {useEffect} from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\n\r\nimport InputElement from '../../../common/formElements/InputElement';\r\nimport required from '../../../utils/validators/required';\r\nimport DateElement from '../../../common/formElements/DateElement';\r\nimport DataListElement from '../../../common/formElements/DataListElement';\r\nimport {RootState} from '../../../redux';\r\nimport {selectEditHonor} from '../../../redux/honors/edit/selectors';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\thonor: selectEditHonor(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps);\r\n\r\nexport type IHonorsEditData = {\r\n\torder: string,\r\n\tdatePresentation: string,\r\n\ttitle: string,\r\n\tuser: number\r\n};\r\n\r\ntype IOwnProps = ConnectedProps<typeof connected>;\r\n\r\ntype IHonorsEditFormProps = InjectedFormProps<IHonorsEditData, IOwnProps> & IOwnProps;\r\nconst HonorsEditForm: React.FC<IHonorsEditFormProps> = (props) => {\r\n\tconst {handleSubmit, error, initialize, honor} = props;\r\n\t\r\n\tuseEffect(() => {\r\n\t\tinitialize({...honor, datePresentation: null} as any);\r\n\t}, []);\r\n\t\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit}>\r\n\r\n\t\t\t{\r\n\t\t\t\terror &&\r\n\t\t\t\t<div>{error}</div>\r\n\t\t\t}\r\n\r\n\t\t\t<div className=\"d-md-flex w-100\">\r\n\t\t\t\t<Translation>\r\n\t\t\t\t\t{t => (\r\n\t\t\t\t\t\t<div className=\"w-100 pr-3\">\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\t\tlabel={t('honors.edit.title')}\r\n\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"order\"\r\n\t\t\t\t\t\t\t\tlabel={t('honors.edit.order')}\r\n\t\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Translation>\r\n\r\n\t\t\t\t<Translation>\r\n\t\t\t\t\t{t => (\r\n\t\t\t\t\t\t<div className=\"w-100 pl-3\">\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\t\t\tname=\"datePresentation\"\r\n\t\t\t\t\t\t\t\tclassName=\"mb-2\"\r\n\t\t\t\t\t\t\t\tlabel={t('honors.edit.date')}\r\n\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\t\tcomponent={DataListElement}\r\n\t\t\t\t\t\t\t\tname=\"user\"\r\n\t\t\t\t\t\t\t\tplaceholder={t('honors.edit.user')}\r\n\t\t\t\t\t\t\t\turl={`${process.env.REACT_APP_SERVER_URL}/search/users`}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Translation>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default connected(\r\n\t\treduxForm<IHonorsEditData, IOwnProps>({\r\n\t\t\tform: 'honorsEditForm'\r\n\t\t})(HonorsEditForm)\r\n);\r\n","import React, {useEffect} from 'react';\r\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {RouteComponentProps} from 'react-router-dom';\r\nimport {isSubmitting, submit} from 'redux-form';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\nimport BackButton from '../../../common/BackButton';\r\nimport ErrorElement from '../../../common/ErrorElement';\r\nimport Loader from '../../../common/Loader/Loader';\r\nimport IsUserRoleMore from '../../../utils/HOC/IsUserRoleMore';\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport {selectEditHonorState} from '../../../redux/honors/edit/selectors';\r\nimport thunkEditHonorLoad from '../../../redux/honors/edit/thunks/thunkEditHonorLoad';\r\nimport thunkEditHonor from '../../../redux/honors/edit/thunks/thunkEditHonor';\r\nimport EditHonorForm, {IHonorsEditData} from './EditHonorForm';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\teditState: selectEditHonorState(state),\r\n\tsubmitting: isSubmitting('honorsEditForm')(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {\r\n\tloadHonor: thunkEditHonorLoad,\r\n\tsend: submit,\r\n\teditHonor: thunkEditHonor\r\n});\r\n\r\ntype IEditHonorPageProps = ConnectedProps<typeof connected> & RouteComponentProps<{id?: string}>;\r\nconst EditHonorPage: React.FC<IEditHonorPageProps> = ({editState, loadHonor, ...props}) => {\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tloadHonor(+props.match.params.id);\r\n\t\tdocument.title = t('honors.edit.pageTitle');\r\n\t}, []);\r\n\r\n\tconst clickHandler = () => {\r\n\t\tprops.send('honorsEditForm');\r\n\t};\r\n\r\n\tconst submitHandler = (vals: IHonorsEditData) => {\r\n\t\tprops.editHonor(+props.match.params.id, vals);\r\n\t};\r\n\r\n\tif(!editState.honor && !editState.isLoading)\r\n\t\treturn null;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">{t('honors.edit.pageTitle')}</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\teditState.isLoading &&\r\n\t\t\t\t\t\t\t<Loader/>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editState.isLoading && editState.error &&\r\n\t\t\t\t\t\t\t<ErrorElement error={editState.error}/>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!editState.isLoading && !editState.error &&\r\n\t\t\t\t\t\t\t<EditHonorForm onSubmit={submitHandler}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!editState.isLoading && !editState.error &&\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tvariant=\"warning\"\r\n\t\t\t\t\t\t\t\t\tonClick={clickHandler}\r\n\t\t\t\t\t\t\t\t\tdisabled={props.submitting}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tprops.submitting &&\r\n\t\t\t\t\t\t\t\t\t\t\t<Spinner animation=\"border\" size=\"sm\"/>\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t{t('common.edit')}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default IsUserRoleMore(Roles.MODERATOR, true)(connected(EditHonorPage));\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {reset, startSubmit, stopSubmit} from 'redux-form';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../index';\r\nimport honorsApi from '../../../utils/api/models/honorsApi';\r\n\r\n\r\nexport type IAddHonorThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkAddHonor = (vals: any): IAddHonorThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(startSubmit('publicationsAddForm'));\r\n\r\n\t\ttry{\r\n\t\t\tawait honorsApi.addHonor(vals);\r\n\t\t\tdispatch(stopSubmit('honorsAddForm'));\r\n\t\t\tdispatch(reset('honorsAddForm'));\r\n\r\n\t\t\ttoast.success('Награда добавлена');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(stopSubmit('honorsAddForm', {\r\n\t\t\t\t_error: e.response?.data.message || e.message,\r\n\t\t\t\t...e.response?.data.errors\r\n\t\t\t}));\r\n\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkAddHonor;\r\n","import React from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\n\r\nimport InputElement from '../../../common/formElements/InputElement';\r\nimport required from '../../../utils/validators/required';\r\nimport DateElement from '../../../common/formElements/DateElement';\r\nimport DataListElement from '../../../common/formElements/DataListElement';\r\n\r\n\r\nexport type IHonorsAddData = {\r\n\torder: string,\r\n\tdatePresentation: string,\r\n\ttitle: string,\r\n\tuser: number\r\n};\r\n\r\ntype IHonorsAddFormProps = InjectedFormProps<IHonorsAddData>;\r\nconst HonorsAddForm: React.FC<IHonorsAddFormProps> = ({handleSubmit, error}) => (\r\n\t<form onSubmit={handleSubmit}>\r\n\r\n\t\t{\r\n\t\t\terror &&\r\n\t\t\t\t<div>{error}</div>\r\n\t\t}\r\n\t\t\r\n\t\t<div className=\"d-md-flex w-100\">\r\n\t\t\t<Translation>\r\n\t\t\t\t{t => (\r\n\t\t\t\t\t<div className=\"w-100 pr-3\">\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"title\"\r\n\t\t\t\t\t\t\tlabel={t('honors.add.title')}\r\n\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={InputElement}\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"order\"\r\n\t\t\t\t\t\t\tlabel={t('honors.add.order')}\r\n\t\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Translation>\r\n\r\n\t\t\t<Translation>\r\n\t\t\t\t{t => (\r\n\t\t\t\t\t<div className=\"w-100 pl-3\">\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={DateElement}\r\n\t\t\t\t\t\t\tname=\"datePresentation\"\r\n\t\t\t\t\t\t\tlabel={t('honors.add.date')}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Field\r\n\t\t\t\t\t\t\tcomponent={DataListElement}\r\n\t\t\t\t\t\t\tname=\"user\"\r\n\t\t\t\t\t\t\tplaceholder={t('honors.add.user')}\r\n\t\t\t\t\t\t\turl={`${process.env.REACT_APP_SERVER_URL}/search/users`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</Translation>\r\n\t\t</div>\r\n\t</form>\r\n);\r\n\r\nexport default reduxForm<IHonorsAddData>({\r\n\tform: 'honorsAddForm'\r\n})(HonorsAddForm);\r\n","import React, {useEffect} from 'react';\r\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\r\nimport {ConnectedProps, connect} from 'react-redux';\r\nimport {submit, isSubmitting} from 'redux-form';\r\nimport {useTranslation} from 'react-i18next';\r\n\r\nimport {RootState} from '../../../redux';\r\nimport BackButton from '../../../common/BackButton';\r\nimport IsUserRoleMore from '../../../utils/HOC/IsUserRoleMore';\r\nimport {Roles} from '../../../utils/helpers/RoleCodeToName';\r\nimport thunkAddHonor from '../../../redux/honors/add/thunks';\r\nimport AddHonorForm from './AddHonorForm';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tsubmitting: isSubmitting('honorsAddForm')(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {\r\n\tadd: thunkAddHonor,\r\n\tsend: submit\r\n});\r\n\r\ntype IAddPublicationPageProps = ConnectedProps<typeof connected>;\r\nconst AddPublicationPage: React.FC<IAddPublicationPageProps> = ({add, send, submitting}) => {\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tdocument.title = t('honors.add.pageTitle');\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('honors.add.pageTitle')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t<AddHonorForm onSubmit={add}/>\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tonClick={() => send('honorsAddForm')}\r\n\t\t\t\t\t\t\tdisabled={submitting}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{submitting && <Spinner size=\"sm\" animation=\"border\"/>}\r\n\t\t\t\t\t\t\t{t('common.add')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default IsUserRoleMore(Roles.MODERATOR, true)(connected(AddPublicationPage));\r\n","import React from 'react';\r\nimport {Trans} from 'react-i18next';\r\n\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\n\r\n\r\ntype IHonorInfoProps = {\r\n\thonor: IHonor\r\n}\r\n\r\nconst HonorInfo: React.FC<IHonorInfoProps> = ({honor}) => (\r\n\t<div>\r\n\t\t<Trans i18nKey=\"honors.single.id\">\r\n\t\t\t<div>ID: {{id: honor.id}}</div>\r\n\t\t</Trans>\r\n\r\n\t\t<Trans i18nKey=\"honors.single.user\">\r\n\t\t\t<div>User: {{authors: honor.user.fullName}}</div>\r\n\t\t</Trans>\r\n\r\n\t\t<Trans i18nKey=\"honors.single.title\">\r\n\t\t\t<div>Title: {{title: honor.title}}</div>\r\n\t\t</Trans>\r\n\r\n\t\t<Trans i18nKey=\"honors.single.date\">\r\n\t\t\t<div>Date of honor: {{id: honor.datePresentation}}</div>\r\n\t\t</Trans>\r\n\t</div>\r\n);\r\n\r\nexport default HonorInfo;\r\n","import {RootState} from '../../';\r\n\r\n\r\nexport const selectHonorSingleState = (state: RootState) => state.honors.single;\r\nexport const selectHonorSingle = (state: RootState) => selectHonorSingleState(state).honor;\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../';\r\nimport {honorSingleError, honorSingleStart, honorSingleSuccess} from './actions';\r\nimport honorsApi from '../../../utils/api/models/honorsApi';\r\n\r\n\r\nexport type IHonorSingleThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkSingleHonor = (id: number): IHonorSingleThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(honorSingleStart());\r\n\r\n\t\ttry{\r\n\t\t\tconst resp = await honorsApi.getHonor(id);\r\n\t\t\tdispatch(honorSingleSuccess(resp.data.data));\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(honorSingleError(e.response?.data.message || e.message));\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkSingleHonor;\r\n","import {\r\n\tHONOR_SINGLE_ERROR,\r\n\tHONOR_SINGLE_START,\r\n\tHONOR_SINGLE_SUCCESS\r\n} from './types';\r\nimport {IHonor} from '../../../interfaces/models/IHonor';\r\n\r\n\r\nexport const honorSingleStart = () => <const>({\r\n\ttype: HONOR_SINGLE_START\r\n});\r\n\r\nexport const honorSingleError = (error: string) => <const>({\r\n\ttype: HONOR_SINGLE_ERROR,\r\n\terror\r\n});\r\n\r\nexport const honorSingleSuccess = (honor: IHonor) => <const>({\r\n\ttype: HONOR_SINGLE_SUCCESS,\r\n\tpayload: honor\r\n});\r\n","import React, {useEffect} from 'react';\r\nimport {RouteComponentProps} from 'react-router';\r\nimport {Button, Card, Row} from 'react-bootstrap';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {Link} from 'react-router-dom';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\n\r\nimport BackButton from '../../../common/BackButton';\r\nimport {RootState} from '../../../redux';\r\nimport Loader from '../../../common/Loader/Loader';\r\nimport HonorInfo from './HonorInfo';\r\nimport ErrorElement from '../../../common/ErrorElement';\r\nimport {selectHonorSingleState} from '../../../redux/honors/single/selectors';\r\nimport thunkSingleHonor from '../../../redux/honors/single/thunks';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\t...selectHonorSingleState(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {load: thunkSingleHonor});\r\n\r\ntype ISingleHonorPageProps = RouteComponentProps<{id: string}> & ConnectedProps<typeof connected>;\r\nconst SingleHonorPage: React.FC<ISingleHonorPageProps> = (props) => {\r\n\tconst {match, isLoading, error, honor, load} = props;\r\n\tconst {t} = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tload(+match.params.id);\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('honors.single.pageTitle')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body>\r\n\t\t\t\t\t{isLoading && <Loader/>}\r\n\t\t\t\t\t{!isLoading && error && <ErrorElement error={error}/>}\r\n\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t!isLoading && !error && honor &&\r\n\t\t\t\t\t\t\t<HonorInfo honor={honor}/>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t<Link to={`/honors/${match.params.id}/edit`}>\r\n\t\t\t\t\t\t\t<Button variant=\"warning\">\r\n\t\t\t\t\t\t\t\t{t('common.edit')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default connected(SingleHonorPage);\r\n","import React from 'react';\r\nimport {reduxForm, InjectedFormProps, Field} from 'redux-form';\r\nimport {Translation} from 'react-i18next';\r\n\r\nimport FileElement from '../../../common/formElements/FileElement';\r\nimport required from '../../../utils/validators/required';\r\n\r\n\r\nexport type IHonorsImportData = {\r\n\timportFile: File\r\n};\r\n\r\ntype IHonorsImportFormProps = InjectedFormProps<IHonorsImportData>;\r\nconst HonorsImportForm: React.FC<IHonorsImportFormProps> = ({handleSubmit, error}) => (\r\n\t<form onSubmit={handleSubmit} className=\"w-50\">\r\n\r\n\t\t{\r\n\t\t\terror &&\r\n\t\t\t<div>{error}</div>\r\n\t\t}\r\n\r\n\t\t<Translation>\r\n\t\t\t{t => (\r\n\t\t\t\t<div className=\"center w-100\">\r\n\t\t\t\t\t<Field\r\n\t\t\t\t\t\tname=\"importFile\"\r\n\t\t\t\t\t\tlabel={t('common.importFile')}\r\n\t\t\t\t\t\tcomponent={FileElement}\r\n\t\t\t\t\t\tvalidate={[required]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</Translation>\r\n\t</form>\r\n);\r\n\r\nexport default reduxForm<IHonorsImportData>({\r\n\tform: 'honorsImportForm'\r\n})(HonorsImportForm);\r\n","import {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {Action} from 'redux';\r\nimport {reset, startSubmit, stopSubmit} from 'redux-form';\r\nimport {toast} from 'react-toastify';\r\n\r\nimport {RootState} from '../../';\r\nimport honorsApi from '../../../utils/api/models/honorsApi';\r\n\r\n\r\nexport type IImportHonorThunkAction = ThunkAction<void, RootState, unknown, Action<any>>;\r\n\r\nconst thunkImportHonor = (vals: any): IImportHonorThunkAction => {\r\n\treturn async (dispatch: ThunkDispatch<{}, {}, Action<any>>) => {\r\n\t\tdispatch(startSubmit('honorsImportForm'));\r\n\r\n\t\ttry{\r\n\t\t\tawait honorsApi.importHonors(vals);\r\n\t\t\tdispatch(stopSubmit('honorsImportForm'));\r\n\t\t\tdispatch(reset('honorsImportForm'));\r\n\r\n\t\t\ttoast.success('Награды импортированы');\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\tdispatch(stopSubmit('honorsImportForm', {\r\n\t\t\t\t_error: e.response?.data.message || e.message,\r\n\t\t\t\t...e.response?.data.errors\r\n\t\t\t}));\r\n\r\n\t\t\ttoast.error(e.response?.data.message || e.message);\r\n\t\t}\r\n\t};\r\n};\r\n\r\nexport default thunkImportHonor;\r\n","import React from 'react';\r\nimport {Button, Card, Row, Spinner} from 'react-bootstrap';\r\nimport {useTranslation} from 'react-i18next';\r\nimport {connect, ConnectedProps} from 'react-redux';\r\nimport {isSubmitting, submit} from 'redux-form';\r\n\r\nimport BackButton from '../../../common/BackButton';\r\nimport ImportHonorsForm from './ImportHonorsForm';\r\nimport {RootState} from '../../../redux';\r\nimport thunkImportHonor from '../../../redux/honors/import/thunks';\r\n\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n\tisSubmit: isSubmitting('honorsImportForm')(state)\r\n});\r\n\r\nconst connected = connect(mapStateToProps, {\r\n\timportHonors: thunkImportHonor,\r\n\tsend: () => submit('honorsImportForm')\r\n});\r\n\r\ntype IImportHonorsPageProps = ConnectedProps<typeof connected>;\r\nconst ImportHonorsPage: React.FC<IImportHonorsPageProps> = (props) => {\r\n\tconst {isSubmit, importHonors, send} = props;\r\n\tconst {t} = useTranslation();\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"title\">\r\n\t\t\t\t{t('honors.import.pageTitle')}\r\n\t\t\t</div>\r\n\r\n\t\t\t<Card className=\"mr-5\">\r\n\t\t\t\t<Card.Body className=\"d-flex flex-column align-items-center\">\r\n\t\t\t\t\t<ImportHonorsForm onSubmit={importHonors}/>\r\n\r\n\t\t\t\t\t<a\r\n\t\t\t\t\t\thref={`${process.env.REACT_APP_SERVER_URL}/examples/honors`}\r\n\t\t\t\t\t\ttarget=\"_blank\"\r\n\t\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t\t>{t('common.downloadExample')}</a>\r\n\t\t\t\t</Card.Body>\r\n\r\n\t\t\t\t<Card.Footer>\r\n\t\t\t\t\t<Row className=\"justify-content-between p-2\">\r\n\t\t\t\t\t\t<BackButton/>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"success\"\r\n\t\t\t\t\t\t\tonClick={send}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isSubmit && <Spinner animation=\"border\" size=\"sm\"/>}\r\n\r\n\t\t\t\t\t\t\t<span className=\"mr-1\">\r\n\t\t\t\t\t\t\t\t{t('common.import')}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Card.Footer>\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default connected(ImportHonorsPage);\r\n","import React from 'react';\r\nimport {Route, Switch} from 'react-router-dom';\r\n\r\nimport NotFoundPage from '../ErrorPages/NotFoundPage';\r\nimport AllHonorsPage from './all';\r\nimport EditHonorPage from './edit';\r\nimport AddHonorPage from './add';\r\nimport SingleHonorPage from './single';\r\nimport ImportHonorPage from './import';\r\n\r\nimport IsUserRoleMore from '../../utils/HOC/IsUserRoleMore';\r\nimport {Roles} from '../../utils/helpers/RoleCodeToName';\r\n\r\n\r\nconst Honors: React.FC<{}> = () => (\r\n\t<Switch>\r\n\t\t<Route path=\"/honors\" exact component={AllHonorsPage}/>\r\n\t\t<Route path=\"/honors/add\" exact component={AddHonorPage}/>\r\n\t\t<Route path=\"/honors/import\" exact component={ImportHonorPage}/>\r\n\t\t<Route path=\"/honors/:id/edit\" exact component={EditHonorPage}/>\r\n\t\t<Route path=\"/honors/:id\" exact component={SingleHonorPage}/>\r\n\t\t<Route path=\"/\" component={NotFoundPage}/>\r\n\t</Switch>\r\n);\r\n\r\nexport default IsUserRoleMore(Roles.VIEWER, true)(Honors);\r\n"],"sourceRoot":""}